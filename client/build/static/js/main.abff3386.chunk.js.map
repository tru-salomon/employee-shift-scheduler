{"version":3,"sources":["i18n/en.tsx","i18n/it.tsx","theme.tsx","Header.tsx","Layout.tsx","dataProvider/index.tsx","dataProvider/dataProvider.tsx","utils/Utilities.tsx","views/timeline.tsx","authProvider.tsx","components/ColorInput.tsx","views/eventsummary.tsx","components/RruleInput.tsx","components/EventPopup.tsx","views/calendar.tsx","employees/index.tsx","employees/EmployeeList.tsx","employees/EmployeeCreate.tsx","employees/EmployeeEdit.tsx","customers/index.tsx","customers/CustomerList.tsx","customers/CustomerCreate.tsx","customers/CustomerEdit.tsx","users/index.tsx","users/UserList.tsx","users/UserCreate.tsx","users/UserEdit.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["customEnglishMessages","englishMessages","resources","employee","name","fields","number","active","color","surname","phone","email","customer","vat","zipcode","city","website","ess","calendar","event","error","error_create","success_create","error_update","success_update","error_delete","success_delete","recurring","thisev","thisandfoll","calendarlist","summary","customItalianMessages","ra","action","add_filter","add","back","bulk_actions","cancel","clear_array_input","clear_input_value","clone","confirm","create","create_item","delete","edit","export","list","refresh","remove_filter","remove_all_filters","remove","save","search","select_all","select_row","show","sort","undo","unselect","expand","close","open_menu","close_menu","update","move_up","move_down","open","toggle_theme","select_columns","update_application","boolean","true","false","null","page","dashboard","loading","not_found","empty","invite","input","file","upload_several","upload_single","image","references","all_missing","many_missing","single_missing","password","toggle_visible","toggle_hidden","message","about","are_you_sure","auth_error","bulk_delete_content","bulk_delete_title","bulk_update_content","bulk_update_title","delete_content","delete_title","details","invalid_form","no","yes","unsaved_changes","navigation","no_results","no_more_results","page_out_of_boundaries","page_out_from_end","page_out_from_begin","page_range_info","partial_page_range_info","current_page","first","last","page_rows_per_page","next","previous","skip_nav","sort_by","ASC","DESC","auth","auth_check_error","user_menu","username","sign_in","sign_in_error","logout","notification","updated","created","deleted","bad_item","item_doesnt_exist","http_error","data_provider_error","i18n_error","canceled","logged_out","not_authorized","application_update_available","validation","required","minLength","maxLength","minValue","maxValue","oneOf","regex","saved_queries","label","query_name","new_label","new_dialog_title","remove_label","remove_label_with_name","remove_dialog_title","remove_message","help","configurable","customize","configureMode","inspector","title","content","reset","hideAll","showAll","Datagrid","unlabeled","SimpleForm","SimpleList","primaryText","secondaryText","tertiaryText","theme","createTheme","palette","primary","main","secondary","info","Header","location","useLocation","translate","useTranslate","currentPath","matchPath","pathname","React","createElement","AppBar","position","Toolbar","variant","Box","flex","display","justifyContent","alignItems","BadgeIcon","sx","marginRight","height","Typography","component","Tabs","value","aria-label","indicatorColor","textColor","Tab","Link","to","smart_count","LocalesMenuButton","languages","locale","LoadingIndicator","& .RaLoadingIndicator-loader","marginTop","UserMenu","Logout","Layout","props","children","style","flexFlow","CssBaseline","ErrorBoundary","FallbackComponent","Error","margin","baseUrl","process","dataProvider","apiUrl","httpClient","arguments","length","undefined","fetchUtils","fetchJson","countHeader","getList","resource","params","perPage","pagination","field","order","rangeStart","rangeEnd","filter","filters","Object","keys","map","key","includes","slice","operator","query","JSON","stringify","range","url","concat","options","headers","Headers","Range","then","_ref","_headers$get","_headers$get$split","json","has","data","total","parseInt","get","split","pop","toLowerCase","getOne","id","_ref2","getMany","1","ids","_ref3","getManyReference","[object Object]","target","_ref4","_headers$get2","_headers$get2$split","method","body","_ref5","updateMany","Promise","all","responses","_ref6","_ref7","Content-Type","_ref8","deleteMany","_ref9","simpleRest","user","authenticated","getSystemConfigs","fetch","credentials","res","getTimelineData","URLSearchParams","getTimelineGroups","textColorOnHEXBg","hex","rgb","result","exec","r","g","b","hexToRgb","eventTypeEnum","j","v","p","s","m","divStyle","width","TimelineView","ref","useRef","notify","useNotify","useCreate","useUpdate","setOpen","useState","rendered","setRendered","setProps","record","timeline","items","DataSet","groups","useEffect","current","VisTimeline","stack","stackSubgroups","zoomKey","zoomMin","zoomMax","groupHeightMode","item","axis","groupTemplate","element","txt","root","ReactDOM","createRoot","render","Tooltip","followCursor","template","tooltip","start","toLocaleString","end","Fragment","customer_descr","hours","verticalScroll","orientation","editable","updateTime","updateGroup","hiddenDates","repeat","selectable","multiselect","onRemove","callback","onUpdate","handleOpen","xss","disabled","onInitialDrawComplete","loadGroups","setTimeout","loadItems","onMove","recId","start_date","end_date","employee_id","group","onError","console","onSettled","handleClose","on","debounce","func","wait","immediate","extraArgs","timeout","context","this","args","callNow","clearTimeout","apply","clear","catch","e","finally","Date","toISOString","vGroups","getVisibleGroups","Number","records","newRecords","customer_id","Dialog","onClose","padding","assign","onSubmit","DateTimeInput","source","SelectInput","choices","defaultValue","ReferenceInput","reference","optionText","Fab","right","bottom","onClick","AddIcon","authProvider","login","request","Request","response","status","reject","statusText","token","resolve","redirectTo","checkError","localStorage","removeItem","checkAuth","getPermissions","ColorField","useRecordContext","background","ColorInput","setShow","className","fullWidth","picker","helperText","validate","fieldState","isTouched","isRequired","useInput","Picker","ReactColor","TextInput","onFocus","onChange","border","marginLeft","ReferenceArrayInput","SelectArrayInput","listFilters","DateInput","alwaysOn","exporter","events","columns","ev","fullname","forEach","jsonExport","err","csv","downloadCSV","EmployeeSummaryList","isLoading","useGetList","Loading","PostFilterSidebar","Card","mr","mt","CardContent","SavedQueriesList","FilterList","icon","CategoryIcon","FilterListItem","type","el","List","aside","bulkActionButtons","DateField","showTime","ReferenceField","TextField","FunctionField","all_day","RruleInput","FormDataConsumer","formData","scopedFormData","getSource","Grid","container","spacing","xs","BooleanInput","NumberInput","RRule","DAILY","WEEKLY","MONTHLY","YEARLY","freq","getUTCDay","RadioButtonGroupInput","&","& .MuiFormControlLabel-label","row","choice","until","PostCreateToolbar","useRedirect","_delete","useDelete","SaveButton","IconButton","onRemoveClick","DeleteIcon","EventPopup","sfProps","toolbar","rest","flexGrow","entries","AutocompleteInput","CalendarView","_popover$record","_popover$record2","_popover$record3","_popover$record4","_popover$record5","_popover$record6","_popover$record7","_popover$record7$_rru","isSmall","useMediaQuery","breakpoints","down","useLocaleState","calendarRef","calendarValue","setCalendarValue","recurrAction","setRecurrAction","dialog","setDialog","editDialog","setEditDialog","recurrDialog","setRecurrDialog","fcinfo","window","setWindow","popover","setPopover","anchorEl","unchecked","setUnchecked","setEvents","utcDate","date","UTC","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","flattenRecord","extProps","extendedProps","reloadEvents","fetchedEvents","_fetchedEvents","_fetchedEvents$filter","allDay","recurrentEvs","_e$ex_dates","_rruleSet$between","startDate","out","rrule","frequency","interval","dtstart","until_date","count","until_occurrences","byweekday","rruleSet","RRuleSet","ex_dates","d","exdate","i","duration","getTime","between","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","push","employee_descr","_parent","_original_start_date","_rrule","recurrentDates","eventEditSubmit","toJSON","curEv","find","shallowEditEvent","eventRemove","previousData","eventId","currEvents","shallowRemoveEvent","handleToggle","currentIndex","indexOf","newUnchecked","splice","md","alignSelf","overflowY","pt","Calendar","showFixedNumberOfWeeks","onClickDay","getApi","gotoDate","activeStartDate","moment","startOf","toDate","marginBottom","labelId","ListItem","disablePadding","ListItemButton","role","dense","ListItemIcon","Checkbox","edge","checked","tabIndex","disableRipple","inputProps","aria-labelledby","ListItemText","FullCalendar","slotMinTime","slotMaxTime","plugins","timeGrid","dayGrid","interactionPlugin","rrulePlugin","headerToolbar","left","center","eventMaxStack","initialView","select","startStr","endStr","eventContent","timeText","eventClick","eventChange","datesSet","dateInfo","weekday","DialogTitle","DialogContent","sanitizeEmptyValues","FormControl","RadioGroup","FormControlLabel","control","Radio","DialogActions","Button","handleCloseRecurrEvt","revert","handleSubmitRecurrEvt","parent","parent_id","oldevt","Popover","PaperProps","anchorOrigin","vertical","horizontal","transformOrigin","EditIcon","CloseIcon","maxWidth","bgcolor","SquareRoundedIcon","backgroundColor","EventRoundedIcon","QueryBuilderRoundedIcon","RepeatRoundedIcon","toText","employees","EmployeeList","rowClick","NumberField","BooleanField","EditButton","DeleteButton","CloneButton","EmployeeCreate","Create","redirect","EmployeeEdit","Edit","customers","CustomerList","CustomerCreate","CustomerEdit","users","UserList","UserCreate","PasswordInput","UserEdit","i18nProvider","polyglotI18nProvider","italianMessages","App","Admin","layout","Resource","CustomRoutes","Route","path","reportWebVitals","onPerfEntry","Function","__webpack_require__","bind","getCLS","getFID","getFCP","getLCP","getTTFB","dotenv","document","getElementById"],"mappings":"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","file":"static/js/main.abff3386.chunk.js","sourcesContent":["import { TranslationMessages } from 'react-admin';\nimport englishMessages from 'ra-language-english';\n\nconst customEnglishMessages: TranslationMessages = {\n    ...englishMessages,\n    resources: {\n      employee: {\n          name: 'Employee |||| Employees',\n          fields: {\n              number: 'Number',\n              active: 'Is active?',\n              color: 'Color',\n              name: 'Name',\n              surname: 'Surname',\n              phone: 'Phone number',\n              email: 'Email address',\n          },\n      },\n      customer: {\n          name: 'Cliente |||| Clienti',\n          fields: {\n              vat: 'VAT number',\n              name: 'Name',\n              email: 'Email address',\n              phone: 'Phone address',\n              zipcode: 'ZIP code',\n              city: 'City',\n              website: 'Website',\n          }\n      }\n  },\n  ess: {\n    calendar: {\n      name: \"Calendar\",\n      event: {\n        error: \"Something went wrong.\",\n        error_create: \"Error on event creation\",\n        success_create: \"Event created\",\n        error_update: \"Error on event update\",\n        success_update: \"Event updated\",\n        error_delete: \"Error on event delete\",\n        success_delete: \"Event removed\",\n        recurring: {\n          thisev: \"This event\",\n          thisandfoll: \"This and the following events\"\n        }\n      },\n      calendarlist: {\n        number: \"Number\"\n      },\n    },\n    summary: {\n      name: \"Report\"\n    }\n  }\n};\n\nexport default customEnglishMessages;","import { TranslationMessages } from 'react-admin';\n\nconst customItalianMessages: TranslationMessages = {\n  ra: {\n    action: {\n      add_filter: 'Aggiungi un filtro',\n      add: 'Aggiungi',\n      back: 'Indietro',\n      bulk_actions: '%{smart_count} selezionati',\n      cancel: 'Annulla',\n      clear_array_input: 'Clear the list',\n      clear_input_value: 'Svuota il modulo',\n      clone: 'Duplica',\n      confirm: 'Conferma',\n      create: 'Crea',\n      create_item: 'Create %{item}',\n      delete: 'Cancella',\n      edit: 'Modifica',\n      export: 'Esporta',\n      list: 'Elenco',\n      refresh: 'Aggiorna',\n      remove_filter: 'Rimuovi questo filtro',\n      remove_all_filters: 'Remove all filters',\n      remove: 'Rimuovi',\n      save: 'Salva',\n      search: 'Ricerca',\n      select_all: 'Select all',\n      select_row: 'Select this row',\n      show: 'Mostra',\n      sort: 'Ordina',\n      undo: 'Annulla',\n      unselect: 'Annulla selezione',\n      expand: 'Espandi',\n      close: 'Chiudi',\n      open_menu: 'Apri il menu',\n      close_menu: 'Chiudi il menu',\n      update: 'Update',\n      move_up: 'Move up',\n      move_down: 'Move down',\n      open: 'Open',\n      toggle_theme: 'Toggle Theme',\n      select_columns: 'Columns',\n      update_application: 'Aggiorna applicazione'\n    },\n    boolean: {\n      true: 'Si',\n      false: 'No',\n      null: ' ',\n    },\n    page: {\n      create: 'Aggiungi %{name}',\n      dashboard: 'Cruscotto',\n      edit: '%{name} %{id}',\n      error: 'Qualcosa non ha funzionato',\n      list: '%{name}',\n      loading: 'Caricamento in corso',\n      not_found: 'Non trovato',\n      show: '%{name} %{id}',\n      empty: 'Nessun %{name} ancora.',\n      invite: 'Vuoi aggiungerne uno?'\n    },\n    input: {\n      file: {\n        upload_several:\n          'Trascina i files da caricare, oppure clicca per selezionare.',\n        upload_single: 'Trascina il file da caricare, oppure clicca per selezionarlo.'\n      },\n      image: {\n        upload_several:\n          'Trascina le immagini da caricare, oppure clicca per selezionarle.',\n        upload_single:\n          'Trascina l\\'immagine da caricare, oppure clicca per selezionarla.'\n      },\n      references: {\n        all_missing: 'Impossibile trovare i riferimenti associati.',\n        many_missing:\n          'Almeno uno dei riferimenti associati non sembra più disponibile.',\n        single_missing:\n          'Il riferimento associato non sembra più disponibile.'\n      },\n      password: {\n        toggle_visible: 'Nascondi la password',\n        toggle_hidden: 'Mostra la password',\n      },\n    },\n    message: {\n      about: 'Informazioni',\n      are_you_sure: 'Sei sicuro ?',\n      auth_error:\n        'A error occurred while validating the authentication token.',\n      bulk_delete_content:\n        'Sei sicuro di voler cancellare questo %{name}? |||| Sei sicuro di voler eliminare questi %{smart_count}?',\n      bulk_delete_title:\n        'Delete %{name} |||| Delete %{smart_count} %{name} items',\n      bulk_update_content:\n        'Are you sure you want to update this %{name}? |||| Are you sure you want to update these %{smart_count} items?',\n      bulk_update_title:\n        'Update %{name} |||| Update %{smart_count} %{name}',\n      clear_array_input: 'Are you sure you want to clear the whole list?',\n      delete_content: 'Are you sure you want to delete this item?',\n      delete_title: 'Cancella %{name} #%{id}',\n      details: 'Dettagli',\n      error:\n        'Un errore locale è occorso e la tua richiesta non è stata completata.',\n      invalid_form: 'Il modulo non è valido. Si prega di verificare la presenza di errori.',\n      loading: 'La pagina si sta caricando, solo un momento per favore',\n      no: 'No',\n      not_found:\n        'Hai inserito un URL errato, oppure hai cliccato un link errato',\n      yes: 'Si',\n      unsaved_changes:\n        \"Alcune modifiche non sono state salvate. Sei sicuro di volerle ignorare?\",\n    },\n    navigation: {\n      no_results: 'Nessun risultato trovato',\n      no_more_results:\n        'La pagina numero %{page} è fuori dell\\'intervallo. Prova la pagina precedente.',\n      page_out_of_boundaries: 'Il numero di pagina %{page} è fuori dei limiti',\n      page_out_from_end: 'Fine della paginazione',\n      page_out_from_begin: 'Il numero di pagina deve essere maggiore di 1',\n      page_range_info: '%{offsetBegin}-%{offsetEnd} di %{total}',\n      partial_page_range_info:\n        '%{offsetBegin}-%{offsetEnd} of more than %{offsetEnd}',\n      current_page: 'Page %{page}',\n      page: 'Go to page %{page}',\n      first: 'Go to first page',\n      last: 'Go to last page',\n      page_rows_per_page: 'Righe per pagina',\n      next: 'Successivo',\n      previous: 'Precedente',\n      skip_nav: 'Vai al contenuto',\n    },\n    sort: {\n      sort_by: 'Ordina per %{field} %{order}',\n      ASC: 'cresente',\n      DESC: 'decrescente',\n    },\n    auth: {\n      auth_check_error: 'È necessario accedere per continuare',\n      user_menu: 'Profilo',\n      username: 'Nome utente',\n      password: 'Password',\n      sign_in: 'Login',\n      sign_in_error: 'Autenticazione fallita, riprovare.',\n      logout: 'Disconnessione'\n    },\n    notification: {\n      updated: 'Record aggiornato |||| %{smart_count} records aggiornati',\n      created: 'Record creato',\n      deleted: 'Record eliminato |||| %{smart_count} records eliminati',\n      bad_item: 'Record errato',\n      item_doesnt_exist: 'Record inesistente',\n      http_error: 'Errore di comunicazione con il server dati',\n      data_provider_error:\n        'Errore del data provider. Controlla la console per i dettagli.',\n      i18n_error:\n        'Traduzioni non trovate per il linguaggio specificato',\n      canceled: 'Azione annullata',\n      logged_out: 'La sessione è stata terminata, si prega di ripetere l\\'autenticazione.',\n      not_authorized: \"You're not authorized to access this resource.\",\n      application_update_available: 'Aggiornamento dell\\'applicazione disponibile'\n    },\n    validation: {\n      required: 'Campo obbligatorio',\n      minLength: 'Deve essere lungo %{min} caratteri almeno',\n      maxLength: 'Deve essere lungo %{max} caratteri al massimo',\n      minValue: 'Deve essere almeno %{min}',\n      maxValue: 'Deve essere al massimo %{max}',\n      number: 'Deve essere un numero',\n      email: 'Deve essere un valido indirizzo email',\n      oneOf: 'Deve essere uno di: %{options}',\n      regex: 'Deve rispettare il formato (espressione regolare): %{pattern}'\n    },\n    saved_queries: {\n      label: 'Saved queries',\n      query_name: 'Query name',\n      new_label: 'Save current query...',\n      new_dialog_title: 'Save current query as',\n      remove_label: 'Remove saved query',\n      remove_label_with_name: 'Remove query \"%{name}\"',\n      remove_dialog_title: 'Remove saved query?',\n      remove_message:\n        'Are you sure you want to remove that item from your list of saved queries?',\n      help: 'Filter the list and save this query for later',\n    },\n    configurable: {\n      customize: 'Customize',\n      configureMode: 'Configure this page',\n      inspector: {\n        title: 'Inspector',\n        content: 'Hover the application UI elements to configure them',\n        reset: 'Reset Settings',\n        hideAll: 'Hide All',\n        showAll: 'Show All',\n      },\n      Datagrid: {\n        title: 'Datagrid',\n        unlabeled: 'Unlabeled column #%{column}',\n      },\n      SimpleForm: {\n        title: 'Form',\n        unlabeled: 'Unlabeled input #%{input}',\n      },\n      SimpleList: {\n        title: 'List',\n        primaryText: 'Primary text',\n        secondaryText: 'Secondary text',\n        tertiaryText: 'Tertiary text',\n      },\n    },\n  },\n  resources: {\n    employee: {\n      name: 'Dipendente |||| Dipendenti',\n      fields: {\n        number: 'Numero',\n        active: 'Attivo?',\n        color: 'Colore',\n        name: 'Nome',\n        surname: 'Cognome',\n        phone: 'Numero di telefono',\n        email: 'Indirizzo email',\n      },\n    },\n    customer: {\n      name: 'Cliente |||| Clienti',\n      fields: {\n        vat: 'P.IVA/CF',\n        name: 'Nome',\n        email: 'Indirizzo email',\n        phone: 'Numero di telefono',\n        zipcode: 'CAP',\n        city: 'Comune',\n        website: 'Sito WEB',\n      }\n    }\n  },\n  ess: {\n    calendar: {\n      name: \"Calendario\",\n      event: {\n        error: \"Qualcosa è andato storto.\",\n        error_create: \"Errore durante la creazione dell'evento\",\n        success_create: \"Evento creato correttamente\",\n        error_update: \"Errore durante l'aggiornamento dell'evento\",\n        success_update: \"Evento aggiornato correttamente\",\n        error_delete: \"Errore durante la cancellazione dell'evento\",\n        success_delete: \"Evento eliminato correttamente\",\n        recurring: {\n          thisev: \"Questo evento\",\n          thisandfoll: \"Questo e gli eventi futuri\"\n        }\n      },\n      calendarlist: {\n        number: \"Matricola\"\n      },\n    },\n    summary: {\n      name: \"Report\"\n    }\n  }\n};\n\nexport default customItalianMessages;","import { createTheme } from '@mui/material/styles';\n\nexport const theme = createTheme({\n  palette: {\n    primary: {\n      main: \"#ffa62b\",\n    },\n    secondary: {\n      main: \"#82c0cc\",\n    },\n    info: {\n      main: \"#82c0cc\"\n    }\n  }\n});","import React from 'react';\nimport { Tabs, Tab, Toolbar, AppBar, Box, Typography } from '@mui/material';\nimport { Link, matchPath, useLocation } from 'react-router-dom';\nimport { UserMenu, Logout, LoadingIndicator, useTranslate } from 'react-admin';\nimport BadgeIcon from '@mui/icons-material/Badge';\nimport { LocalesMenuButton } from 'react-admin';\n\nconst Header = () => {\n    const location = useLocation();\n    const translate = useTranslate();\n\n    let currentPath = '/';\n    if (!!matchPath('/customer/*', location.pathname)) {\n        currentPath = '/customer';\n    } else if (!!matchPath('/employee/*', location.pathname)) {\n        currentPath = '/employee';\n    //} else if (!!matchPath('/timeline/*', location.pathname)) {\n    //    currentPath = '/timeline';\n    } else if (!!matchPath('/calendar/*', location.pathname)) {\n        currentPath = '/calendar';\n    } else if (!!matchPath('/user/*', location.pathname)) {\n        currentPath = '/user';\n    } else if (!!matchPath('/summary/*', location.pathname)) {\n        currentPath = '/summary';\n    }\n\n    return (\n        <AppBar position=\"static\" color=\"primary\">\n            <Toolbar variant=\"dense\">\n                <Box flex={1} display=\"flex\" justifyContent=\"space-between\">\n                    <Box display=\"flex\" alignItems=\"center\">\n                        <BadgeIcon\n                            sx={{ marginRight: '1em', height: 30 }}\n                        />\n                        <Typography component=\"span\" variant=\"h5\">\n                            Shift Scheduler\n                        </Typography>\n                    </Box>\n                    <Box>\n                        <Tabs\n                            value={currentPath}\n                            aria-label=\"Navigation Tabs\"\n                            indicatorColor=\"secondary\"\n                            textColor=\"inherit\"\n                        >\n                        {/*<Tab\n                            label={'Timeline'}\n                            component={Link}\n                            to=\"/timeline\"\n                            value=\"/timeline\"\n                        />*/}\n                        <Tab\n                            label={translate(`ess.calendar.name`)}\n                            component={Link}\n                            to=\"/calendar\"\n                            value=\"/calendar\"\n                        />\n                        <Tab\n                            label={translate(`ess.summary.name`)}\n                            component={Link}\n                            to=\"/summary\"\n                            value=\"/summary\"\n                        />\n                        <Tab\n                            \n                            label={translate(`resources.customer.name`, {\n                                smart_count: 2,\n                            })}\n                            component={Link}\n                            to=\"/customer\"\n                            value=\"/customer\"\n                        />\n                        <Tab\n                            label={translate(`resources.employee.name`, {\n                                smart_count: 2,\n                            })}\n                            component={Link}\n                            to=\"/employee\"\n                            value=\"/employee\"\n                        />\n                        </Tabs>\n                    </Box>\n                    <Box display=\"flex\">\n                        <LocalesMenuButton\n                            languages={[\n                                { locale: 'en', name: 'English' },\n                                { locale: 'it', name: 'Italiano' },\n                            ]}\n                        />\n                        <LoadingIndicator\n                            sx={{\n                                '& .RaLoadingIndicator-loader': {\n                                    marginTop: 2,\n                                },\n                            }}\n                        />\n                        <UserMenu>\n                            <Logout />\n                            <Tab\n                                label={'Users'}\n                                component={Link}\n                                to=\"/user\"\n                                value=\"/user\"\n                            />\n                        </UserMenu>\n                    </Box>\n                </Box>\n            </Toolbar>\n        </AppBar>\n    );\n};\n\nexport default Header;","import React, { HtmlHTMLAttributes } from 'react';\nimport { CssBaseline } from '@mui/material';\nimport { CoreLayoutProps } from 'react-admin';\nimport { ErrorBoundary } from 'react-error-boundary';\n\nimport { Error } from 'react-admin';\nimport Header from './Header';\n\nconst Layout = (props: LayoutProps) => {\n    const { children } = props;\n    return (\n        <div style={{\n            display: \"flex\",\n            flexFlow: \"column\",\n            height: \"100vh\"\n        }}>\n            <CssBaseline />\n            <Header />\n            {/* @ts-ignore */}\n            <ErrorBoundary FallbackComponent={Error}>\n                <div style={{\n                    margin: \"0 40px\",\n                    height: \"100vh\",\n                    display: \"flex\",\n                    flexFlow: \"column\"\n                }}>\n                        {children}\n                </div>\n            </ErrorBoundary>\n        </div>\n    );\n};\n\nexport interface LayoutProps\n    extends CoreLayoutProps,\n        Omit<HtmlHTMLAttributes<HTMLDivElement>, 'title'> {}\n\nexport default Layout;","import simpleRest from \"./dataProvider\";\nimport { fetchUtils } from \"react-admin\";\n\nconst fetchJson = (url: any, options: any = {}) => {\n\toptions.user = {\n\t\tauthenticated: true\n\t};\n\toptions[\"credentials\"] = \"include\"\n\treturn fetchUtils.fetchJson(url, options);\n};\n\nconst baseUrl = process.env.REACT_APP_SERVER_BASEURL;\nconst baseDataProvider = simpleRest(baseUrl + \"/api\", fetchJson);\n\nexport const dataProvider = {\n\t...baseDataProvider,\n\tgetSystemConfigs: () => {\n\t\treturn fetch(baseUrl + \"/api/sysconfig\", {\n\t\t\tmethod: \"GET\",\n\t\t\tcredentials: 'include',\n\t\t}).then(res => res.json())\n\t},\n\tgetTimelineData: (params: {start: string, end: string, groups: any} | {id: string}) => {\n\t\treturn fetch(baseUrl + \"/api/timeline-event?\" + new URLSearchParams(params), {\n\t\t\tmethod: \"GET\",\n\t\t\tcredentials: 'include',\n\t\t}).then(res => res.json())\n\t},\n\tgetTimelineGroups: () => {\n\t\treturn fetch(baseUrl + \"/api/employee\", {\n\t\t\tmethod: \"GET\",\n\t\t\tcredentials: 'include',\n\t\t}).then(res => res.json())\n\t}\n}\n","import { stringify } from 'query-string';\nimport { fetchUtils, DataProvider } from 'ra-core';\n\n/**\n * Maps react-admin queries to a simple REST API\n *\n * This REST dialect is similar to the one of FakeRest\n *\n * @see https://github.com/marmelab/FakeRest\n *\n * @example\n *\n * getList     => GET http://my.api.url/posts?sort=['title','ASC']&range=[0, 24]\n * getOne      => GET http://my.api.url/posts/123\n * getMany     => GET http://my.api.url/posts?filter={id:[123,456,789]}\n * update      => PUT http://my.api.url/posts/123\n * create      => POST http://my.api.url/posts\n * delete      => DELETE http://my.api.url/posts/123\n *\n * @example\n *\n * import * as React from \"react\";\n * import { Admin, Resource } from 'react-admin';\n * import simpleRestProvider from 'ra-data-simple-rest';\n *\n * import { PostList } from './posts';\n *\n * const App = () => (\n *     <Admin dataProvider={simpleRestProvider('http://path.to.my.api/')}>\n *         <Resource name=\"posts\" list={PostList} />\n *     </Admin>\n * );\n *\n * export default App;\n */\nexport default (\n    apiUrl: string,\n    httpClient = fetchUtils.fetchJson,\n    countHeader: string = 'Content-Range'\n): DataProvider => ({\n    getList: (resource, params) => {\n        const { page, perPage } = params.pagination;\n        const { field, order } = params.sort;\n\n        const rangeStart = (page - 1) * perPage;\n        const rangeEnd = page * perPage - 1;\n\n        const filter = params.filter;\n        const operators = { '_gte': '>=', '_lte': '<=', '_neq': '!=' };\n\n        const filters = Object.keys(filter).map(key => {\n            if ([\"_gte\", \"_lte\", \"_neq\"].includes(key.slice(-4))) {\n                return { field: key.slice(0, -4), operator: key.slice(-4), value: filter[key] }\n            }\n            \n            return { field: key, operator: '=', value: filter[key] };\n        });\n\n        const query = {\n            sort: JSON.stringify([field, order]),\n            range: JSON.stringify([rangeStart, rangeEnd]),\n            filter: JSON.stringify(filters),\n        };\n        const url = `${apiUrl}/${resource}?${stringify(query)}`;\n        const options =\n            countHeader === 'Content-Range'\n                ? {\n                      // Chrome doesn't return `Content-Range` header if no `Range` is provided in the request.\n                      headers: new Headers({\n                          Range: `${resource}=${rangeStart}-${rangeEnd}`,\n                      }),\n                  }\n                : {};\n\n        return httpClient(url, options).then(({ headers, json }) => {\n            if (!headers.has(countHeader)) {\n                throw new Error(\n                    `The ${countHeader} header is missing in the HTTP Response. The simple REST data provider expects responses for lists of resources to contain this header with the total number of results to build the pagination. If you are using CORS, did you declare ${countHeader} in the Access-Control-Expose-Headers header?`\n                );\n            }\n            \n                return {\n                    data: json,\n                    total:\n                        countHeader === 'Content-Range'\n                            ? parseInt(headers?.get('content-range')?.split('/')?.pop() || \"0\", 10)\n                            : parseInt(headers?.get(countHeader.toLowerCase()) || \"0\"),\n                };\n        });\n    },\n\n    getOne: (resource, params) =>\n        httpClient(`${apiUrl}/${resource}/${params.id}`).then(({ json }) => ({\n            data: json,\n        })),\n\n    getMany: (resource, params) => {\n        const query = {\n            filter: JSON.stringify({'1': { field: \"id\", operator: 'in', value: params.ids }})\n        };\n        const url = `${apiUrl}/${resource}?${stringify(query)}`;\n        return httpClient(url).then(({ json }) => ({ data: json }));\n    },\n\n    getManyReference: (resource, params) => {\n        const { page, perPage } = params.pagination;\n        const { field, order } = params.sort;\n\n        const rangeStart = (page - 1) * perPage;\n        const rangeEnd = page * perPage - 1;\n\n        const query = {\n            sort: JSON.stringify([field, order]),\n            range: JSON.stringify([(page - 1) * perPage, page * perPage - 1]),\n            filter: JSON.stringify({\n                ...params.filter,\n                [params.target]: params.id,\n            }),\n        };\n        const url = `${apiUrl}/${resource}?${stringify(query)}`;\n        const options =\n            countHeader === 'Content-Range'\n                ? {\n                      // Chrome doesn't return `Content-Range` header if no `Range` is provided in the request.\n                      headers: new Headers({\n                          Range: `${resource}=${rangeStart}-${rangeEnd}`,\n                      }),\n                  }\n                : {};\n\n        return httpClient(url, options).then(({ headers, json }) => {\n            if (!headers.has(countHeader)) {\n                throw new Error(\n                    `The ${countHeader} header is missing in the HTTP Response. The simple REST data provider expects responses for lists of resources to contain this header with the total number of results to build the pagination. If you are using CORS, did you declare ${countHeader} in the Access-Control-Expose-Headers header?`\n                );\n            }\n            return {\n                data: json,\n                total:\n                    countHeader === 'Content-Range'\n                    ? parseInt(headers?.get('content-range')?.split('/')?.pop() || \"0\", 10)\n                    : parseInt(headers?.get(countHeader.toLowerCase()) || \"0\"),\n            };\n        });\n    },\n\n    update: (resource, params) =>\n        httpClient(`${apiUrl}/${resource}/${params.id}`, {\n            method: 'PUT',\n            body: JSON.stringify(params.data),\n        }).then(({ json }) => ({ data: json })),\n\n    // simple-rest doesn't handle provide an updateMany route, so we fallback to calling update n times instead\n    updateMany: (resource, params) =>\n        Promise.all(\n            params.ids.map(id =>\n                httpClient(`${apiUrl}/${resource}/${id}`, {\n                    method: 'PUT',\n                    body: JSON.stringify(params.data),\n                })\n            )\n        ).then(responses => ({ data: responses.map(({ json }) => json.id) })),\n\n    create: (resource, params) =>\n        httpClient(`${apiUrl}/${resource}`, {\n            method: 'POST',\n            body: JSON.stringify(params.data),\n        }).then(({ json }) => ({ data: json })),\n\n    delete: (resource, params) =>\n        httpClient(`${apiUrl}/${resource}/${params.id}`, {\n            method: 'DELETE',\n            headers: new Headers({\n                'Content-Type': 'text/plain',\n            }),\n        }).then(({ json }) => ({ data: json })),\n\n    // simple-rest doesn't handle filters on DELETE route, so we fallback to calling DELETE n times instead\n    deleteMany: (resource, params) =>\n        Promise.all(\n            params.ids.map(id =>\n                httpClient(`${apiUrl}/${resource}/${id}`, {\n                    method: 'DELETE',\n                    headers: new Headers({\n                        'Content-Type': 'text/plain',\n                    }),\n                })\n            )\n        ).then(responses => ({\n            data: responses.map(({ json }) => json.id),\n        })),\n});","import React, { Component, useEffect, useRef, useState } from 'react';\n\nexport const hexToRgb = function(hex: string | undefined) {\n    if (!hex)\n        return null;\n\n    var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    return result ? {\n      r: parseInt(result[1], 16),\n      g: parseInt(result[2], 16),\n      b: parseInt(result[3], 16)\n    } : null;\n};\n\nexport const textColorOnHEXBg = function(hex: string | undefined) {\n    const rgb = hexToRgb(hex);\n    if (!rgb)\n        return undefined;\n\n    return (rgb.r*0.299 + rgb.g*0.587 + rgb.b*0.114) > 186 ? \"#000000\" : \"#ffffff\";\n}\n\nexport const eventTypeEnum = {\n    \"j\": \"Job\",\n    \"v\": \"Vacation\",\n    \"p\": \"Permit\",\n    \"s\": \"Sickness\",\n    \"m\": \"Makeup\"\n}","import React, { Component, useEffect, useRef, useState } from 'react';\nimport { DataSet } from 'vis-data';\nimport { Timeline as VisTimeline } from 'vis-timeline/standalone';\nimport type {\n\tTimelineGroup,\n\tTimelineItem\n} from 'vis-timeline/types';\nimport 'vis-timeline/styles/vis-timeline-graph2d.min.css';\n\nimport AddIcon from '@mui/icons-material/Add';\nimport Dialog from '@mui/material/Dialog';\nimport Box from '@mui/material/Box';\nimport { SimpleForm, TextInput, required, ReferenceInput, SelectInput, DateTimeInput, useNotify, useCreate, useUpdate } from 'react-admin';\nimport Fab from '@mui/material/Fab';\nimport { dataProvider } from '../dataProvider'\nimport { Tooltip, Typography } from '@mui/material';\nimport ReactDOM from 'react-dom/client';\nimport BadgeIcon from '@mui/icons-material/Badge';\n\nimport {textColorOnHEXBg} from '../utils/Utilities';\n\nconst divStyle = {\n\twidth: \"100%\",\n\theight: \"100%\",\n};\n\nexport default function TimelineView() {\n\n    const ref = useRef(null);\n\tconst notify = useNotify();\n\tconst [create] = useCreate();\n\tconst [update] = useUpdate();\n\tconst [open, setOpen] = useState(false);\n\tconst [rendered, setRendered] = useState(false);\n\tconst [props, setProps] = useState<any>({\n\t\trecord: undefined\n\t});\n\tconst timeline = useRef<any | null>(null);\n\tconst items = useRef<DataSet<TimelineItem>>(new DataSet<TimelineItem>());\n\tconst groups = useRef<DataSet<TimelineGroup>>(new DataSet<TimelineGroup>());\n\n\tuseEffect(() => {\n\t\ttimeline.current = new VisTimeline(ref.current!, items.current, groups.current, {\n\t\t\tstack: false,\n\t\t\tstackSubgroups: false,\n\t\t\tzoomKey: 'ctrlKey',\n\t\t\tzoomMin: 60 * 60 * 24 * 1000,\n\t\t\tzoomMax: 60 * 60 * 24 * 30 * 1000,\n\t\t\theight: '100%',\n\t\t\tgroupHeightMode: 'fixed',\n\t\t\tmargin: {\n\t\t\t\titem: 5,\n\t\t\t\taxis: 10\n\t\t\t},\n\t\t\tgroupTemplate: function (item, element, data) {\n\t\t\t\tconst txt = item.name + \" \" + item.surname;\n\t\t\t\tconst root = item.root ? item.root : ReactDOM.createRoot(\n\t\t\t\t\telement as HTMLElement\n\t\t\t\t);\n\t\t\t\troot.render(\n\t\t\t\t\t<Tooltip title={txt} followCursor>\n\t\t\t\t\t\t<div style={{ width: \"100%\" }}>\n\t\t\t\t\t\t\t<BadgeIcon /> {txt} <br />\n\t\t\t\t\t\t\t<em>{\"Dipendente\"}</em>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t);\n\n\t\t\t\titem.root = root;\n\n\t\t\t\treturn '<div>.</div>';\n\t\t\t},\n\t\t\ttemplate: function (item, element, data) {\n\t\t\t\tlet tooltip = item.start.toLocaleString(\"it-IT\") + \" - \" + item.end.toLocaleString(\"it-IT\"); //TODO: make locale dynamic\n\n\t\t\t\tlet title = (\n\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t<Typography color=\"inherit\">{item.customer_descr} {\"(\" + item.hours + \" hours)\"}</Typography>\n\t\t\t\t\t\t<em>{tooltip}</em>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t)\n\n\t\t\t\tconst root = item.root ? item.root : ReactDOM.createRoot(\n\t\t\t\t\telement as HTMLElement\n\t\t\t\t);\n\t\t\t\troot.render(\n\t\t\t\t\t<Tooltip title={title} followCursor>\n\t\t\t\t\t\t<div style={{ height: 40 }}>\n\t\t\t\t\t\t\t{item.customer_descr}<br />\n\t\t\t\t\t\t\t{item.hours + \" hours\"}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t);\n\n\t\t\t\titem.root = root;\n\n\t\t\t\treturn `<div style=\"height: 40px\">.</div>`;\n\t\t\t},\n\t\t\tverticalScroll: true,\n\t\t\torientation: \"top\", // necessario affinchè la scrollbar verticale parta dall'alto\n\t\t\teditable: {\n\t\t\t\tadd: false,\n\t\t\t\tremove: true,\n\t\t\t\tupdateTime: true,\n\t\t\t\tupdateGroup: true\n\t\t\t},\n\t\t\thiddenDates: [{\n\t\t\t\tstart: '2017-03-04 00:00:00',\n\t\t\t\tend: '2017-03-06 00:00:00',\n\t\t\t\trepeat: 'weekly'\n\t\t\t},\n\t\t\t// hide outside of 9am to 5pm - use any 2 days and repeat daily\n\t\t\t{\n\t\t\t\tstart: '2017-03-04 19:00:00',\n\t\t\t\tend: '2017-03-05 07:00:00',\n\t\t\t\trepeat: 'daily'\n\t\t\t}\n\t\t\t],\n\t\t\tlocale: 'it_IT', //TODO: make locale dynamic\n\t\t\tselectable: true,\n\t\t\tmultiselect: false,\n\t\t\tonRemove: function (item, callback) { },\n\t\t\tonUpdate: function (item, callback) {\n\t\t\t\tdebugger;\n\t\t\t\thandleOpen(item);\n\t\t\t},\n\t\t\txss: {\n\t\t\t\tdisabled: true,\n\t\t\t},\n\t\t\tonInitialDrawComplete: function () {\n\t\t\t\tloadGroups(() => { setTimeout(loadItems, 50) });\n\t\t\t},\n\n\t\t\tonMove: function (item, callback) { // bound drag or range move\n\t\t\t\tconst recId = item[\"id\"];\n\t\t\t\tlet data = {\n\t\t\t\t\tid: recId,\n\t\t\t\t\tstart_date: item.start,\n\t\t\t\t\tend_date: item.end,\n\t\t\t\t\temployee_id: item.group\n\t\t\t\t}\n\n\t\t\t\tupdate('event', { id: recId, data: data }, {\n\t\t\t\t\tonError: (error) => {\n\t\t\t\t\t\tnotify(\"Error on updating\") //TODO: make locale dynamic\n\t\t\t\t\t\tconsole.error(error)\n\t\t\t\t\t\tcallback(null);\n\t\t\t\t\t},\n\t\t\t\t\tonSettled: (data, error) => {\n\t\t\t\t\t\titems.current.remove(recId)\n\t\t\t\t\t\thandleClose();\n\t\t\t\t\t\tloadItems(undefined);\n\t\t\t\t\t\tnotify(\"Item updated\") //TODO: make locale dynamic\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t});\n\n\t\ttimeline.current.on(\"scrollSide\", debounce(loadItems, 200, false, null))\n\t\ttimeline.current.on(\"rangechange\", debounce(loadItems, 200, false, null))\n\t}, [timeline, groups, items]);\n\n\tconst postSave = (data: any) => {\n\t\tif (!props || !props.record) {\n\t\t\tcreate('event', { data }, {\n\t\t\t\tonError: (error) => {\n\t\t\t\t\tnotify(\"Error on creation\") //TODO: make locale dynamic\n\t\t\t\t\tconsole.error(error)\n\t\t\t\t},\n\t\t\t\tonSettled: (data, error) => {\n\t\t\t\t\thandleClose();\n\t\t\t\t\tloadItems(undefined);\n\t\t\t\t\tnotify(\"Item succesfully created\") //TODO: make locale dynamic\n\t\t\t\t},\n\t\t\t});\n\t\t} else {\n\t\t\tconst recId = props.record[\"id\"];\n\t\t\tupdate('event', { id: recId, data: data }, {\n\t\t\t\tonError: (error) => {\n\t\t\t\t\tnotify(\"Error on updating\") //TODO: make locale dynamic\n\t\t\t\t\tconsole.error(error)\n\t\t\t\t},\n\t\t\t\tonSettled: (data, error) => {\n\t\t\t\t\titems.current.remove(recId)\n\t\t\t\t\thandleClose();\n\t\t\t\t\tloadItems(undefined);\n\t\t\t\t\tnotify(\"Item updated\") //TODO: make locale dynamic\n\t\t\t\t},\n\t\t\t})\n\t\t}\n\t}\n\n\tconst debounce = (func: any, wait: number | undefined, immediate: any, extraArgs: any) => {\n\t\tvar timeout: any;\n\n\t\treturn function(this: any) {\n\t\t\tvar context = this,\n\t\t\t\targs = extraArgs;\n\t\t\tvar later = function () {\n\t\t\t\ttimeout = null;\n\t\t\t\tif (!immediate) func.apply(context, args);\n\t\t\t};\n\t\t\tvar callNow = immediate && !timeout;\n\t\t\tclearTimeout(timeout);\n\t\t\ttimeout = setTimeout(later, wait);\n\t\t\tif (callNow) func.apply(context, args);\n\t\t};\n\t};\n\n\tconst loadGroups = (callback: () => void) => {\n\t\tdataProvider.getTimelineGroups()\n\t\t\t.then(\n\t\t\t\t(result) => {\n\t\t\t\t\tgroups.current.clear();\n\t\t\t\t\tgroups.current.add(result.map((r: any) => {\n\t\t\t\t\t\tr.content = r.name + \" \" + r.surname;\n\t\t\t\t\t\treturn r;\n\t\t\t\t\t}))\n\t\t\t\t})\n\t\t\t.catch((e) => {\n\t\t\t})\n\t\t\t.finally(() => {\n\t\t\t\tif (callback)\n\t\t\t\t\tcallback()\n\t\t\t});\n\t};\n\n\tconst loadItems = (callback: (() => void) | undefined) => {\n\t\tif (!timeline.current) return;\n\n\t\tlet start = new Date(timeline.current.range.start).toISOString();\n\t\tlet end = new Date(timeline.current.range.end).toISOString();\n\t\tlet vGroups = timeline.current.getVisibleGroups();\n\n\t\tvGroups = vGroups.map((g: any) => {\n\t\t\treturn Number(g);\n\t\t})\n\t\tlet params = {\n\t\t\t\"start\": start,\n\t\t\t\"end\": end,\n\t\t\t\"groups\": vGroups\n\t\t};\n\n\t\tdataProvider.getTimelineData(params)\n\t\t\t.then(\n\t\t\t\t(result) => {\n\t\t\t\t\tlet records = result || [];\n\t\t\t\t\trecords = records.map((r: any) => {\n\t\t\t\t\t\tr.start = new Date(r.start_date);\n\t\t\t\t\t\tr.end = new Date(r.end_date);\n\t\t\t\t\t\tr.group = r.employee_id;\n\t\t\t\t\t\treturn r\n\t\t\t\t\t});\n\t\t\t\t\tlet newRecords = records.filter((r: any) => {\n\t\t\t\t\t\treturn !items.current.get(r.id)\n\t\t\t\t\t})\n\t\t\t\t\tnewRecords = newRecords.map((r: any) => {\n\t\t\t\t\t\tr.style = `background: ${r.color}; color: ${textColorOnHEXBg(r.color)}`;\n\n\t\t\t\t\t\treturn r;\n\t\t\t\t\t})\n\t\t\t\t\titems.current.add(newRecords);\n\n\t\t\t\t\tif (callback)\n\t\t\t\t\t\tcallback()\n\t\t\t\t})\n\t\t\t.catch((e) => {\n\t\t\t})\n\t\t\t.finally(() => {\n\t\t\t});\n\t}\n\n\tconst handleClose = () => {\n\t\tif (props && props.record) {\n\t\t\tloadItems(() => setOpen(false));\n\t\t} else {\n\t\t\tsetOpen(false)\n\t\t}\n\t\tsetProps({})\n\t}\n\n\tconst handleOpen = (record: any = null) => {\n\t\tif (record && record.id) {\n\t\t\tsetProps({\n\t\t\t\trecord: {\n                    id: record.id,\n                    start_date: record.start_date,\n                    end_date: record.end_date,\n                    employee_id: record.employee_id,\n                    customer_id: record.customer_id\n                }\n\t\t\t})\n\t\t} else {\n\t\t\tsetProps({})\n\n\t\t}\n\n\t\tsetOpen(true)\n\t}\n\n\treturn (\n\t\t<div style={{\n\t\t\tmargin: \"30px 0\",\n\t\t\tflex: \"1 1 auto\"\n\t\t}}>\n\t\t\t<div style={divStyle}>\n\t\t\t\t<div ref={ref} style={divStyle} />\n\t\t\t\t<Dialog\n\t\t\t\t\topen={open}\n\t\t\t\t\tonClose={handleClose}\n\t\t\t\t>\n\t\t\t\t\t<Box>\n\t\t\t\t\t\t<Typography variant=\"h6\" sx={{\n\t\t\t\t\t\t\tpadding: \"10px 20px\"\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t{props.record && props.record[\"id\"] ? \"Modifica evento\" : \"Crea evento\"}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<SimpleForm\n\t\t\t\t\t\t\t{...props}\n\t\t\t\t\t\t\tresource=\"event\"\n\t\t\t\t\t\t\tonSubmit={postSave}>\n\t\t\t\t\t\t\t<DateTimeInput source=\"start_date\" label=\"Data inizio\" />\n\t\t\t\t\t\t\t<DateTimeInput source=\"end_date\" label=\"Data fine\" />\n\t\t\t\t\t\t\t\t<SelectInput source=\"type\" choices={[\n\t\t\t\t\t\t\t\t\t{ id: 'j', name: 'Lavoro' },\n\t\t\t\t\t\t\t\t\t{ id: 'v', name: 'Ferie' },\n\t\t\t\t\t\t\t\t\t{ id: 'p', name: 'Permesso' },\n\t\t\t\t\t\t\t\t\t{ id: 's', name: 'Malattia' },\n\t\t\t\t\t\t\t\t\t{ id: 'm', name: 'Recupero' },\n\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\tdefaultValue=\"j\" />\n\t\t\t\t\t\t\t<ReferenceInput source=\"employee_id\" reference=\"employee\" label=\"Employee\">\n\t\t\t\t\t\t\t\t<SelectInput optionText=\"fullname\" />\n\t\t\t\t\t\t\t</ReferenceInput>\n\t\t\t\t\t\t\t<ReferenceInput source=\"customer_id\" reference=\"customer\" label=\"Customer\">\n\t\t\t\t\t\t\t\t<SelectInput optionText=\"name\" />\n\t\t\t\t\t\t\t</ReferenceInput>\n\t\t\t\t\t\t</SimpleForm>\n\t\t\t\t\t</Box>\n\t\t\t\t</Dialog>\n\t\t\t\t<Fab color=\"primary\" aria-label=\"add\" style={{\n\t\t\t\t\tright: 20,\n\t\t\t\t\tposition: 'fixed',\n\t\t\t\t\tbottom: 10\n\t\t\t\t}} onClick={handleOpen}>\n\t\t\t\t\t<AddIcon />\n\t\t\t\t</Fab>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import { AuthProvider } from 'react-admin';\n\nexport const authProvider: AuthProvider = {\n    login: ({ username, password }) => {\n        const request = new Request(process.env.REACT_APP_SERVER_BASEURL+'/api/session', {\n            method: 'POST',\n            body: JSON.stringify({ username, password }),\n            credentials: 'include',\n            headers: new Headers({ 'Content-Type': 'application/json' }),\n        })\n        return fetch(request)\n            .then(response => {\n                if (response.status < 200 || response.status >= 300) {\n                    return Promise.reject(response.statusText);\n                }\n                return response.json();\n            })\n            .then(({ token }) => {\n                return Promise.resolve();\n            });\n    },\n    logout: () => {\n        const request = new Request(process.env.REACT_APP_SERVER_BASEURL+'/api/session', {\n            method: 'DELETE',\n            credentials: 'include',\n            headers: new Headers({ 'Content-Type': 'application/json' })\n        })\n        return fetch(request)\n            .then(response => {\n                if (response.status < 200 || response.status >= 300) {\n                    return Promise.resolve({redirectTo: '/login'});\n                }\n                return response.json();\n            })\n            .then(({ token }) => {\n                return Promise.resolve();\n            });\n    },\n    // called when the API returns an error\n    checkError: ({ status }) => {\n        if (status === 401 || status === 403) {\n            localStorage.removeItem('username');\n            return Promise.reject();\n        }\n        return Promise.resolve();\n    },\n    checkAuth: () => {\n        const request = new Request(process.env.REACT_APP_SERVER_BASEURL+'/api/session', {\n            method: 'GET',\n            credentials: 'include',\n            headers: new Headers({ 'Content-Type': 'application/json' }),\n        })\n        return fetch(request)\n            .then(response => {\n                if (response.status < 200 || response.status >= 300) {\n                    return Promise.reject()\n                }\n                return response.json();\n            })\n            .then(({ data }) => {\n                return Promise.resolve();\n            });\n    },\n    getPermissions: () => Promise.resolve(),\n};","import React from 'react'\nimport { useInput, useRecordContext, Validator } from 'ra-core'\nimport { TextInput } from 'react-admin';\nimport { useState } from 'react'\nimport * as ReactColor from 'react-color'\nimport './css/ColorInput.css'\n\ninterface ColorFieldProps {\n  source: string\n  // eslint-disable-next-line react/no-unused-prop-types\n  label?: string\n  className?: string\n}\n\nexport const ColorField = ({ source }: ColorFieldProps) => {\n  const record = useRecordContext()\n\n  return (\n    <div style={{ display: 'flex' }}>\n      <div\n        style={{\n          width: '20px',\n          height: '20px',\n          background: record[source],\n          marginRight: '5px',\n        }}\n      />\n    </div>\n  )\n}\n\ninterface ColorInputProps {\n  resource?: string\n  label?: string\n  fullWidth?: boolean\n  options?: {\n    disableAlpha: true\n  }\n  source: string\n  helperText?: string\n  defaultValue?: string\n  className?: string\n  isRequired?: boolean\n  validate?: Validator | Validator[] | undefined\n  variant?: 'filled' | 'outlined' | 'standard'\n  picker?:\n    | 'Alpha'\n    | 'Block'\n    | 'Check'\n    | 'Chrome'\n    | 'Circle'\n    | 'Compact'\n    | 'Github'\n    | 'Hue'\n    | 'Material'\n    | 'Photoshop'\n    | 'Sketch'\n    | 'Slider'\n    | 'Swatches'\n    | 'Twitter'\n    | 'Custom'\n}\n\nexport const ColorInput = (props: ColorInputProps) => {\n  const [show, setShow] = useState(false)\n\n  const {\n    label,\n    source,\n    className,\n    fullWidth,\n    defaultValue,\n    options,\n    picker = 'Chrome',\n    resource,\n    helperText,\n    validate,\n    variant = 'standard',\n  } = props\n\n  const {\n    field,\n    fieldState: { isTouched, error },\n    isRequired,\n  } = useInput({\n    ...props,\n    validate,\n  })\n\n  const handleOpen = () => setShow(true)\n  const handleClose = () => setShow(false)\n  const handleChange = ({ hex }: any) => {\n    field.onChange(hex)\n  }\n\n  const Picker = ReactColor[`${picker}Picker` as keyof typeof ReactColor]\n\n  return (\n    <div style={{ display: 'flex' }}>\n      <TextInput\n        {...field}\n        fullWidth={fullWidth}\n        source={source}\n        onFocus={handleOpen}\n        isRequired={isRequired}\n        label={label}\n        error={!!(isTouched && error)}\n      />\n      {show ? (\n        <div className=\"ColorInput-popup\">\n          {/* eslint-disable-next-line */}\n          <div className=\"ColorInput-cover\" onClick={handleClose} />\n          {/* eslint-disable-next-line @typescript-eslint/ban-ts-comment */}\n          {/* @ts-ignore */}\n          <Picker {...options} color={field.value} onChange={handleChange} />\n        </div>\n      ) : null}\n      <div\n        style={{\n          width: '20px',\n          height: '40px',\n          background: field.value ? field.value : \"#FFFFFF\",\n          border: \"1px solid #bbb\",\n          marginRight: '5px',\n          marginLeft: '-1px'\n        }}\n      />\n    </div>\n  )\n}","import { Card, CardContent } from '@mui/material';\nimport React from 'react';\nimport { useGetList, Datagrid, TextField, DateField, ReferenceField, NumberField, TextInput, List, DateInput, ReferenceInput, ReferenceArrayInput, SelectArrayInput, Loading, SavedQueriesList, FilterLiveSearch, FilterList, FilterListItem, FunctionField, BooleanField } from 'react-admin';\nimport MailIcon from '@mui/icons-material/Mail';\nimport CategoryIcon from '@mui/icons-material/Category';\nimport { ColorField } from '../components/ColorInput';\nimport BadgeIcon from '@mui/icons-material/Badge';\nimport { downloadCSV } from 'react-admin';\nimport jsonExport from 'jsonexport/dist';\n\nconst sort = { field: 'id', order: 'DESC' };\nconst postFilters = [\n    <ReferenceArrayInput source=\"customer_id\" reference=\"customer\" alwaysOn isRequired={true}>\n        <SelectArrayInput optionText=\"name\" />\n    </ReferenceArrayInput>,\n    <ReferenceArrayInput source=\"employee_id\" reference=\"employee\" alwaysOn isRequired={true}>\n        <SelectArrayInput optionText=\"fullname\" />\n    </ReferenceArrayInput>\n];\n\nconst listFilters = [\n    <DateInput source=\"start_date_gte\" alwaysOn/>,\n    <DateInput source=\"end_date_lte\" alwaysOn/>,\n];\n\nconst exporter = (events:any) => {\n    const columns = ['start_date', 'end_date', 'type', 'employee_fullname', 'customer_name', 'hours']\n    \n    events.map((ev: any) => {\n        ev[\"employee_fullname\"] = ev.employee.fullname;\n        ev[\"customer_name\"] = ev.customer.name;\n\n        Object.keys(ev).forEach(key => {\n            if (!columns.includes(key))\n                delete ev[key]\n        });\n        return ev;\n    });\n    jsonExport(events, {\n        headers: ['employee_fullname', 'customer_name', 'type', 'start_date', 'end_date', 'hours']\n    }, (err, csv) => {\n        downloadCSV(csv, 'events');\n    });\n};\n\nexport default function EmployeeSummaryList() {\n\tconst { data, total, isLoading, error } = useGetList(\n\t\t'employee',\n        { \n            sort: { field: 'fullname', order: 'ASC' }\n        }\n\t);\n\tif (isLoading) { return <Loading />; }\n\tif (error) { return <p>ERROR</p>; }\n\n    const PostFilterSidebar = () => (\n        <Card sx={{ order: -1, mr: 2, mt: 9, width: 200 }}>\n            <CardContent>\n                <SavedQueriesList />\n                <FilterList label=\"Type\" icon={<CategoryIcon />}>\n                    <FilterListItem label=\"Job\" value={{ type: 'j' }} />\n                    <FilterListItem label=\"Permit\" value={{ type: 'p' }} />\n                    <FilterListItem label=\"Vacation\" value={{ type: 'v' }} />\n                    <FilterListItem label=\"Sickness\" value={{ type: 's' }} />\n                    <FilterListItem label=\"Makeup\" value={{ type: 'm' }} />\n                </FilterList>\n\n                <FilterList label=\"Employee\" icon={<BadgeIcon />}>\n                    {data && data.map(function(el){\n                        return <FilterListItem label={el.fullname} value={{ employee_id: el.id }} />;\n                    })}\n                </FilterList>\n\n            </CardContent>\n        </Card>\n    );\n\n    return (\n        <div>\n            <List resource='event' aside={<PostFilterSidebar />} filters={listFilters} sort={{ field: 'start_date', order: 'DESC' }} exporter={exporter}>\n                <Datagrid bulkActionButtons={false}\n                >\n                    <DateField source=\"start_date\" showTime={true} />\n                    <DateField source=\"end_date\" showTime={true} />\n                    <ReferenceField source=\"employee_id\" reference=\"employee\">\n                            <ColorField label=\"\" source=\"color\" />\n                    </ReferenceField>\n                    <ReferenceField source=\"employee_id\" reference=\"employee\">\n                            <TextField source=\"fullname\" />\n                    </ReferenceField>\n                    <TextField source=\"type\" />\n                    <ReferenceField source=\"customer_id\" reference=\"customer\">\n                        <TextField source=\"name\" />\n                    </ReferenceField>\n                    <FunctionField label=\"Hours\" render={(record:any) => record && (record.all_day ? `All day` : record.hours)} />\n                </Datagrid>\n            </List>\n        </div>\n    );\n};\n","import * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { BooleanInput, DateInput, FieldTitle, FormDataConsumer, Labeled, NumberField, NumberInput, RadioButtonGroupInput, SelectArrayInput, SelectInput, TextInput, required } from 'react-admin';\nimport { RRule, datetime } from 'rrule';\nimport { Box, FormControl, FormControlLabel, FormLabel, Grid, Radio, RadioGroup } from '@mui/material';\nimport { DateTime } from 'rrule/dist/esm/datetime';\n\ninterface RruleInputProps {\n  source: string;\n}\n\n/**\n * common: \n * - repeat every X (num) day/week/month/year (select)\n * - end: never/date/after X occurrences (radio)\n * \n * week:\n * - repeat on jan/feb/mar/... (multiple, default current day of week selected)\n * \n * month:\n * - every month the day X/every month the first/second/... (preset) X (preset)\n * \n * \n * @param param0 \n * @returns \n */\nconst RruleInput: React.FC<RruleInputProps> = ({ source }) => (\n  <FormDataConsumer>\n    {({ formData, scopedFormData, getSource }) => {\n      return (\n        <>\n        <Grid container spacing={2}>\n            <Grid item xs={4}>\n              <BooleanInput source={\"recurring\"} label={formData.recurring ? \"Ripeti ogni\" : \"Ripeti\"} />\n            </Grid>\n            {formData.recurring && \n              <>\n              <Grid item xs={4}>\n                  <NumberInput source={\"interval\"} validate={required()} defaultValue={1} label=\"Intervallo\" />\n              </Grid>\n              <Grid item xs={4}>\n                <SelectInput\n                  source={`frequency`}\n                  style={{\n                    marginTop: \"0\"\n                  }}\n                  validate={required()}\n                  label=\"Frequenza\"\n                  defaultValue={RRule.DAILY}\n                  choices={[\n                    { id: RRule.DAILY, name: 'Days' },\n                    { id: RRule.WEEKLY, name: 'Weeks' },\n                    { id: RRule.MONTHLY, name: 'Months' },\n                    { id: RRule.YEARLY, name: 'Years' },\n                  ]}\n                />\n              </Grid>\n              <Grid item xs={12}>\n                {formData.freq === RRule.WEEKLY ? <SelectArrayInput\n                  fullWidth\n                  label=\"Si ripete il\"\n                  source={`byweekday`}\n                  defaultValue={() => {\n                    return formData.start_date ?  (new Date(formData.start_date)).getUTCDay() % 7 : null\n                  }}\n                  choices={[\n                    { id: 0, name: 'Domenica' },\n                    { id: 1, name: 'Lunedì' },\n                    { id: 2, name: 'Martedì' },\n                    { id: 3, name: 'Mercoledì' },\n                    { id: 4, name: 'Giovedì' },\n                    { id: 5, name: 'Venerdì' },\n                    { id: 6, name: 'Sabato' },\n                  ]}\n                /> : null }\n                <RadioButtonGroupInput source=\"until\" label={\"Fine:\"} sx={{\n                    '&': {width: \"100%\"},\n                    '& .MuiFormControlLabel-label': {width: \"100%\"}\n                  }} row={false} defaultValue={0}\n                  choices={[\n                      { id: 0},\n                      { id: 1},\n                      { id: 2},\n                  ]} optionText={(choice) => {\n                    switch(choice.id) {\n                      case 1: //date\n                        return (\n                          <Grid container spacing={2}  alignItems=\"center\" >\n                            <Grid item xs={4}>\n                              {\"Data:\"}\n                            </Grid>\n                            <Grid item xs={8}>\n                              <DateInput fullWidth disabled={formData.until != 1} source={\"until_date\"} validate={formData.until == 1 ? required() : undefined}  />\n                            </Grid>\n                          </Grid>\n                          )\n                      case 2: //occurrences\n                        return (\n                          <Grid container spacing={2} alignItems=\"center\">\n                            <Grid item xs={4}>\n                              {\"Dopo:\"}\n                            </Grid>\n                            <Grid item xs={8}>\n                              <NumberInput fullWidth disabled={formData.until != 2} source={\"until_occurrences\"} validate={formData.until == 2 ? required() : undefined}  defaultValue={1} />\n                            </Grid>\n                          </Grid>\n                        )\n                      default:\n                        return (\n                          <Grid container spacing={2} alignItems=\"center\">\n                            <Grid item xs={12}>\n                              {\"Mai:\"}\n                            </Grid>\n                          </Grid>\n                        )\n                    }\n                  }} />\n                </Grid>\n                </>\n              }\n            </Grid>\n          </>\n        );\n      }}\n    </FormDataConsumer>\n  );\n  \n  RruleInput.propTypes = {\n    source: PropTypes.string.isRequired,\n  };\n  \n  export default RruleInput;\n\n  ","import React from 'react';\nimport { useFormContext } from 'react-hook-form';\nimport { AutocompleteInput, BooleanInput, DateInput, DateTimeInput, FormDataConsumer, ReferenceInput, required, SelectInput, SimpleForm, TimeInput, useCreate, useDelete, useUpdate } from \"react-admin\";\nimport { textColorOnHEXBg, eventTypeEnum } from '../utils/Utilities';\nimport { Create, SaveButton, Toolbar, useRedirect, useNotify } from 'react-admin';\nimport { Box, Grid, IconButton } from '@mui/material';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport RruleInput from './RruleInput';\nimport { RRule, datetime } from 'rrule';\n\nconst PostCreateToolbar = (props:any) => {\n    const redirect = useRedirect();\n    const notify = useNotify();\n\tconst [_delete] = useDelete();\n\n    return (\n        <Toolbar>\n            <SaveButton\n                label=\"Save\"\n            />\n            <IconButton sx={{ marginLeft: \"auto\" }} aria-label=\"delete\" onClick={() => {\n                props.onRemoveClick()\n            }}>\n                <DeleteIcon />\n            </IconButton>\n        </Toolbar>\n    );\n};\n\nexport const EventPopup = (props: any) => {\n    const { onRemoveClick, ...sfProps } = props;\n\n    return (\n        <SimpleForm\n            {...sfProps}\n            toolbar={<PostCreateToolbar onRemoveClick={onRemoveClick}></PostCreateToolbar>}>\n\n            <FormDataConsumer>\n            {({ formData, ...rest }) => \n            <Box sx={{ flexGrow: 1 }}>\n                <Grid container spacing={2}>\n                    <Grid item xs={12}>\n                        <BooleanInput source=\"all_day\" label=\"Tutto il giorno\" />\n                    </Grid>\n                    <Grid item xs={6}>\n                        <DateTimeInput fullWidth source=\"start_date\" label=\"Data inizio\" validate={required()} />\n                    </Grid>\n                    {/*<Grid item xs={3}>\n                        {!formData.all_day && <TimeInput fullWidth source=\"start_time\" label=\"Ora inizio\" validate={required()} />}\n                    </Grid>*/}\n                    <Grid item xs={6}>\n                        <DateTimeInput fullWidth source=\"end_date\" label=\"Data fine\" validate={required()} />\n                    </Grid>\n                    {/*<Grid item xs={3}>\n                        {!formData.all_day && <TimeInput fullWidth source=\"end_time\" label=\"Ora fine\" validate={required()} />}\n                    </Grid>*/}\n                    <Grid item xs={4}>\n                        <SelectInput source=\"type\" choices={\n                            Object.entries(eventTypeEnum).map(([id, name]) => ({id,name}))\n                        } \n                        defaultValue=\"j\"/>\n                    </Grid>\n                    <Grid item xs={4}>\n                            <ReferenceInput source=\"employee_id\" reference=\"employee\" label=\"Employee\" >\n                                <AutocompleteInput optionText=\"fullname\" validate={required()} />\n                            </ReferenceInput>\n                    </Grid>\n                    <Grid item xs={4}>\n                        {formData.type === \"j\" && \n                            <ReferenceInput \n                            source=\"customer_id\" \n                            reference=\"customer\"  \n                            validate={required()}\n                            label=\"Customer\">\n                                <AutocompleteInput optionText=\"name\" validate={required()}/>\n                            </ReferenceInput>\n                        }\n                    </Grid>\n                </Grid>\n                <RruleInput source=\"rrule\" />\n            </Box>\n        }\n        </FormDataConsumer>\n        </SimpleForm>\n    )\n}\n","import React, { useEffect, useRef, useState } from 'react'\nimport FullCalendar from '@fullcalendar/react' // must go before plugins\nimport timeGrid from '@fullcalendar/timegrid' // a plugin!\nimport dayGrid from '@fullcalendar/daygrid'\nimport { Box, Chip, useMediaQuery, Theme, Card, CardContent, Checkbox, IconButton, Popover, Button, DialogTitle, DialogContent, DialogActions, FormControl, RadioGroup, FormControlLabel, Radio, Grid } from '@mui/material';\nimport { dataProvider } from '../dataProvider'\nimport interactionPlugin from '@fullcalendar/interaction';\nimport Dialog from '@mui/material/Dialog';\nimport AddIcon from '@mui/icons-material/Add';\nimport { useNotify, useCreate, useUpdate, useGetList, Loading, useDelete, useTranslate, useLocaleState } from 'react-admin';\nimport Fab from '@mui/material/Fab';\nimport List from '@mui/material/List';\nimport ListItem from '@mui/material/ListItem';\nimport ListItemButton from '@mui/material/ListItemButton';\nimport ListItemIcon from '@mui/material/ListItemIcon';\nimport ListItemText from '@mui/material/ListItemText';\nimport { textColorOnHEXBg, eventTypeEnum } from '../utils/Utilities';\nimport moment from 'moment';\nimport { EventPopup } from '../components/EventPopup';\nimport Calendar from 'react-calendar';\nimport 'react-calendar/dist/Calendar.css';\nimport { EventChangeArg, EventContentArg, EventInput } from '@fullcalendar/core';\nimport rrulePlugin from '@fullcalendar/rrule'\nimport { RRule, RRuleSet } from 'rrule';\n\nimport EditIcon from '@mui/icons-material/Edit';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport CloseIcon from '@mui/icons-material/Close';\nimport SquareRoundedIcon from '@mui/icons-material/SquareRounded';\nimport EventRoundedIcon from '@mui/icons-material/EventRounded';\nimport QueryBuilderRoundedIcon from '@mui/icons-material/QueryBuilderRounded';\nimport RepeatRoundedIcon from '@mui/icons-material/RepeatRounded';\n\n\nexport default function CalendarView() {\n\tconst isSmall = useMediaQuery<Theme>(theme => theme.breakpoints.down('md'));\n    const translate = useTranslate();\n\tconst [locale] = useLocaleState();\n\tconst calendarRef = useRef<FullCalendar>(null);\n\tconst [create] = useCreate();\n\tconst [update] = useUpdate();\n\tconst [_delete] = useDelete();\n\tconst notify = useNotify();\n\tconst [calendarValue, setCalendarValue] = useState(new Date());\n\tconst [recurrAction, setRecurrAction] = useState(\"0\")\n\tconst [dialog, setDialog] = useState<any>({\n\t\topen: false,\n\t\trecord: undefined\n\t});\n\tconst [editDialog, setEditDialog] = useState<any>({\n\t\topen: false,\n\t\trecord: undefined\n\t});\n\tconst [recurrDialog, setRecurrDialog] = useState<any>({\n\t\tfcinfo: undefined, //fullcalendar event info\n\t\topen: false,\n\t\trecord: undefined,\n\t\tevent: undefined //edit or delete\n\t});\n\tconst [window, setWindow] = useState<any>({\n\t\tstart: null,\n\t\tend: null\n\t})\n\n\tconst [popover, setPopover] = useState<any>({\n\t\topen: false,\n\t\trecord: undefined,\n\t\tanchorEl: null\n\t})\n\n\tconst [unchecked, setUnchecked] = useState([] as number[]);\n\tconst [events, setEvents] = useState([] as EventInput[]);\n\n\tconst { data, total, isLoading, error } = useGetList(\n\t\t'employee'\n\t);\n\n\tconst utcDate = (date: Date) => {\n\t\treturn new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate(), date.getHours(), date.getMinutes(), date.getSeconds()))\n\t}\n\n\tconst flattenRecord = (event: EventInput) => {\n\t\tvar record = event,\n\t\t\textProps = record.extendedProps;\n\n\t\tdelete record[\"extendedProps\"];\n\t\tvar data = { ...record, ...extProps };\n\t\tdata.start_date = data.start;\n\t\tdata.end_date = data.end;\n\n\t\treturn data;\n\t}\n\n\t/**\n\t * \n\t * @param e the recurring event \n\t * @returns array of \"exploded\" events in the current window\n\t */\n\tconst recurrentDates = (e: EventInput) => {\n\t\tconst startDate = new Date(e?.start_date);\n\t\tlet out: EventInput[] = [];\n\t\tlet rrule = new RRule({\n\t\t\tfreq: e?.frequency,\n\t\t\tinterval: e?.interval,\n\t\t\tdtstart: utcDate(startDate),\n\t\t\tuntil: e?.until == 1 && e?.until_date ? new Date(e?.until_date) : null,\n\t\t\tcount: e?.until == 2 ? e?.until_occurrences : null,\n\t\t\tbyweekday: e?.byweekday,\n\t\t});\n\n\t\tconst rruleSet = new RRuleSet();\n\t\trruleSet.rrule(\n\t\t\trrule\n\t\t);\n\n\t\tif (e.ex_dates)\n\t\t\te.ex_dates?.forEach((d: string) => rruleSet.exdate(utcDate(new Date(d))))\n\n\t\tlet i = 0;\n\t\tlet duration = (new Date(e.end_date).getTime() - new Date(e.start_date).getTime());\n\n\t\trruleSet.between(new Date(window.start), new Date(window.end))?.map((d) => new Date(\n\t\t\td.getUTCFullYear(),\n\t\t\td.getUTCMonth(),\n\t\t\td.getUTCDate(),\n\t\t\td.getUTCHours(),\n\t\t\td.getUTCMinutes(),\n\t\t)).forEach((d: Date) => {\n\t\t\tout.push({\n\t\t\t\tid: e.id + \"_\" + i++,\n\t\t\t\tstart: new Date(d),\n\t\t\t\tend: new Date(d.getTime() + duration),\n\t\t\t\ttype: e.type,\n\t\t\t\tcolor: e.color,\n\t\t\t\tallDay: e.all_day,\n\t\t\t\ttextColor: textColorOnHEXBg(e.color),\n\t\t\t\ttitle: e.type != \"j\" ? eventTypeEnum[e.type as keyof typeof eventTypeEnum] : e.customer_descr,\n\t\t\t\temployee_id: e.employee_id,\n\t\t\t\temployee_descr: e.employee_descr,\n\t\t\t\tcustomer_id: e.customer_id,\n\t\t\t\trecurring: true,\n\t\t\t\tfrequency: e.frequency,\n\t\t\t\tinterval: e.interval,\n\t\t\t\tuntil: e?.until,\n\t\t\t\tuntil_date: e?.until_date,\n\t\t\t\tuntil_occurrences: e?.until_occurrences,\n\t\t\t\tbyweekday: e?.byweekday,\n\t\t\t\t_parent: e,\n\t\t\t\t_original_start_date: new Date(d).toISOString(),\n\t\t\t\t_rrule: rrule\n\t\t\t})\n\t\t})\n\n\t\treturn out;\n\t}\n\n\t/**\n\t * \n\t * @param callback \n\t * @returns \n\t */\n\tconst reloadEvents = (callback?: () => void) => {\n\t\tif (!data || !window.start)\n\t\t\treturn;\n\n\t\tlet groups = data!.map(e => e.id);\n\t\tgroups = groups.filter(g => !unchecked.includes(g))\n\n\t\tlet params = {\n\t\t\t\"start\": window.start,\n\t\t\t\"end\": window.end,\n\t\t\t\"groups\": unchecked.length > 0 ? groups : \"all\"\n\t\t};\n\n\t\tdataProvider.getTimelineData(params)\n\t\t\t.then((fetchedEvents) => {\n\t\t\t\tfetchedEvents = fetchedEvents?.map((e: EventInput) => {\n\t\t\t\t\te.start = e.start_date;\n\t\t\t\t\te.end = e.end_date;\n\t\t\t\t\te.allDay = e.all_day;\n\t\t\t\t\te.textColor = textColorOnHEXBg(e.color);\n\t\t\t\t\te.title = e.type != \"j\" ? eventTypeEnum[e.type as keyof typeof eventTypeEnum] : e.customer_descr;\n\n\t\t\t\t\treturn e;\n\t\t\t\t})\n\n\t\t\t\tlet recurrentEvs: EventInput[] = [];\n\t\t\t\tfetchedEvents.filter((e: EventInput) => e.recurring)?.forEach((e: any) => {\n\t\t\t\t\trecurrentEvs = recurrentEvs.concat(recurrentDates(e));\n\t\t\t\t})\n\n\t\t\t\tsetEvents([...fetchedEvents.filter((e: EventInput) => !e.recurring), ...recurrentEvs]);\n\n\t\t\t\tif (callback)\n\t\t\t\t\tcallback()\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tconsole.error(err);\n\t\t\t});\n\t}\n\n\t/**\n\t * on window change load the events\n\t */\n\tuseEffect(() => {\n\t\treloadEvents()\n\t}, [window, data, unchecked])\n\n\tif (isLoading) { return <Loading />; }\n\tif (error) { return <p>ERROR</p>; }\n\n\tconst shallowAddEvent = (event: EventInput) => {\n\t\tsetEvents(current => [...current, event]);\n\n\t\treturn event;\n\t}\n\n\tconst shallowEditEvent = (event: EventInput) => {\n\t\tlet curEv = events.find(e => e.id == event[\"id\"]);\n\t\tsetEvents(current => [...current.filter(e => e.id != event[\"id\"]), { ...curEv, ...event }]);\n\t}\n\n\tconst shallowRemoveEvent = (eventId: string) => {\n\t\tlet currEvents = events;\n\t\tcurrEvents = currEvents.filter(e => e.id != eventId);\n\n\t\tsetEvents(currEvents);\n\t}\n\n\tconst eventCreate = (data: any) => {\n\t\tdata.customer_id = data.customer_id === \"\" ? null : data.customer_id;\n\t\tcreate('event', { data }, {\n\t\t\tonError: (error) => {\n\t\t\t\tnotify(translate(\"ess.calendar.event.error_create\")) \n\t\t\t\tconsole.error(error)\n\t\t\t},\n\t\t\tonSettled: (data, error) => {\n\t\t\t\thandleClose();\n\t\t\t\treloadEvents(() => {\n\t\t\t\t\tnotify(translate(\"ess.calendar.event.success_create\")) \n\t\t\t\t})\n\t\t\t},\n\t\t});\n\t}\n\n\tconst eventEditSubmit = (info?: EventChangeArg) => {\n\t\tconst record = info && info.event ? flattenRecord(info.event.toJSON()) : info || editDialog.record;\n\n\t\tif (record?._parent) {\n\t\t\tsetRecurrDialog({\n\t\t\t\topen: true,\n\t\t\t\trecord: record,\n\t\t\t\tfcinfo: info,\n\t\t\t\tevent: \"edit\"\n\t\t\t})\n\t\t} else {\n\t\t\tupdate('event', { id: record.id, data: record }, {\n\t\t\t\tonError: (error) => {\n\t\t\t\t\tnotify(translate(\"ess.calendar.event.error_update\")) \n\t\t\t\t\tconsole.error(error)\n\t\t\t\t},\n\t\t\t\tonSettled: (data, error) => {\n\t\t\t\t\tnotify(translate(\"ess.calendar.event.success_update\")) \n\n\t\t\t\t\tshallowEditEvent(record);\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n\n\tconst eventRemove = () => {\n\t\tconst record = editDialog.record || popover.record;\n\n\t\tif (record?._parent) {\n\t\t\tsetRecurrDialog({\n\t\t\t\topen: true,\n\t\t\t\trecord: record,\n\t\t\t\tfcinfo: undefined,\n\t\t\t\tevent: \"delete\"\n\t\t\t})\n\t\t} else {\n\t\t\t_delete('event', { id: record.id, previousData: record }, {\n\t\t\t\tonError: (error) => {\n\t\t\t\t\tnotify(translate(\"ess.calendar.event.error_delete\"))\n\t\t\t\t\tconsole.error(error)\n\t\t\t\t},\n\t\t\t\tonSettled: (data, error) => {\n\t\t\t\t\tnotify(translate(\"ess.calendar.event.success_delete\"))\n\t\t\t\t\tshallowRemoveEvent(record.id)\n\t\t\t\t\tsetEditDialog({\n\t\t\t\t\t\topen: false,\n\t\t\t\t\t\trecord: null\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}\n\n\tconst handleToggle = (value: number) => () => {\n\t\tconst currentIndex = unchecked.indexOf(value);\n\t\tconst newUnchecked = [...unchecked];\n\n\t\tif (currentIndex === -1) {\n\t\t\tnewUnchecked.push(value);\n\t\t} else {\n\t\t\tnewUnchecked.splice(currentIndex, 1);\n\t\t}\n\n\t\tsetUnchecked(newUnchecked);\n\t};\n\n\tconst handleClose = () => {\n\t\tsetDialog({\n\t\t\topen: false,\n\t\t\trecord: {}\n\t\t})\n\t}\n\n\tconst handleOpen = (record: any = null) => {\n\t\tlet props: any = {\n\t\t\topen: true\n\t\t}\n\t\tif (record && record.id) {\n\t\t\tprops[\"record\"] = record;\n\t\t}\n\n\t\tsetDialog(props)\n\t}\n\n\tconst handleCloseRecurrEvt = () => {\n\t\tif (recurrDialog.fcinfo)\n\t\t\trecurrDialog.fcinfo.revert()\n\n\t\tsetRecurrDialog({\n\t\t\topen: false,\n\t\t\tfcinfo: undefined,\n\t\t\trecord: undefined,\n\t\t\tevent: undefined\n\t\t})\n\t}\n\n\tconst handleSubmitRecurrEvt = () => {\n\t\tvar data = recurrDialog.record,\n\t\t\taction = recurrAction,\n\t\t\tparent = data._parent,\n\t\t\tevent = recurrDialog.event;\n\n\t\tconst callback = () => {\n\t\t\treloadEvents(() => {\n\t\t\t\tnotify(translate(\"ess.calendar.event.success_update\"))\n\n\t\t\t\tsetRecurrAction(\"0\")\n\t\t\t\tsetPopover({\n\t\t\t\t\topen: false,\n\t\t\t\t\trecord: null,\n\t\t\t\t\tanchorEl: null\n\t\t\t\t});\n\t\t\t\tsetEditDialog({\n\t\t\t\t\topen: false,\n\t\t\t\t\trecord: null\n\t\t\t\t});\n\t\t\t\tsetRecurrDialog({\n\t\t\t\t\topen: false,\n\t\t\t\t\tfcinfo: undefined,\n\t\t\t\t\trecord: undefined,\n\t\t\t\t\tevent: undefined\n\t\t\t\t})\n\t\t\t})\n\t\t}\n\n\t\tswitch (action) {\n\t\t\tcase \"0\": //this event only\n\t\t\t\tdata.parent_id = parent.id;\n\t\t\t\tdelete data[\"id\"];\n\n\t\t\t\tvar ex_dates = parent.ex_dates || [];\n\t\t\t\tex_dates.push(data._original_start_date);\n\t\t\t\tparent.ex_dates = ex_dates;\n\n\t\t\t\tdelete data[\"_parent\"]\n\t\t\t\tdelete data[\"_original_start_date\"]\n\t\t\t\tdata.recurring = false;\n\n\t\t\t\tupdate('event', { id: parent.id, data: parent }, {\n\t\t\t\t\tonError: (error) => {\n\t\t\t\t\t\tnotify(translate(\"ess.calendar.event.error\"))\n\t\t\t\t\t\tconsole.error(error)\n\t\t\t\t\t},\n\t\t\t\t\tonSettled: (d, error) => {\n\t\t\t\t\t\tif (event == \"edit\") {\n\t\t\t\t\t\t\tcreate('event', { data: data }, {\n\t\t\t\t\t\t\t\tonError: (error) => {\n\t\t\t\t\t\t\t\t\tnotify(translate(\"ess.calendar.event.error\"))\n\t\t\t\t\t\t\t\t\tconsole.error(error)\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tonSettled: (d, error) => {\n\t\t\t\t\t\t\t\t\tcallback()\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcallback()\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\n\n\t\t\t\tbreak;\n\t\t\tcase \"1\": //this and following events\n\t\t\t\tdelete data[\"id\"];\n\n\t\t\t\tparent.until = 1;\n\t\t\t\tparent.until_date = data._original_start_date;\n\n\t\t\t\tdelete data[\"_parent\"]\n\t\t\t\tdelete data[\"_original_start_date\"]\n\n\t\t\t\tupdate('event', { id: parent.id, data: parent }, {\n\t\t\t\t\tonError: (error) => {\n\t\t\t\t\t\tnotify(translate(\"ess.calendar.event.error\"))\n\t\t\t\t\t\tconsole.error(error)\n\t\t\t\t\t},\n\t\t\t\t\tonSettled: (oldevt, error) => {\n\t\t\t\t\t\tif (event == \"edit\") {\n\t\t\t\t\t\t\tcreate('event', { data: data }, {\n\t\t\t\t\t\t\t\tonError: (error) => {\n\t\t\t\t\t\t\t\t\tnotify(translate(\"ess.calendar.event.error\"))\n\t\t\t\t\t\t\t\t\tconsole.error(error)\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tonSettled: (data, error) => {\n\t\t\t\t\t\t\t\t\tcallback()\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcallback()\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase \"2\": //all events\n\t\t\t\tdata.id = parent.id;\n\n\t\t\t\tdelete data[\"_parent\"]\n\t\t\t\tdelete data[\"_original_start_date\"]\n\n\t\t\t\t_delete('event', { id: data.id, previousData: parent }, {\n\t\t\t\t\tonError: (error) => {\n\t\t\t\t\t\tnotify(translate(\"ess.calendar.event.error\"))\n\t\t\t\t\t\tconsole.error(error)\n\t\t\t\t\t},\n\t\t\t\t\tonSettled: (data, error) => {\n\t\t\t\t\t\tcallback()\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t//unhandled action\t\t\t\n\t\t}\n\t}\n\n\treturn (\n\t\t<div id=\"calendar-container\" style={{\n\t\t\tmargin: \"30px 0\"\n\t\t}}>\n\t\t\t<Box display=\"flex\">\n\t\t\t\t{\n\t\t\t\t\t/**\n\t\t\t\t\t * Left component\n\t\t\t\t\t */\n\t\t\t\t}\n\t\t\t\t<Box\n\t\t\t\t\tsx={{\n\t\t\t\t\t\tdisplay: { xs: 'none', md: 'block' },\n\t\t\t\t\t\torder: -1,\n\t\t\t\t\t\twidth: '17em',\n\t\t\t\t\t\tmr: 2,\n\t\t\t\t\t\talignSelf: 'flex-start',\n\t\t\t\t\t\theight: \"85vh\",\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Card\n\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\toverflowY: \"auto\",\n\t\t\t\t\t\t\theight: \"85vh\",\n\t\t\t\t\t\t\tmarginTop: \"10px\"\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<CardContent sx={{ pt: 1 }}>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t\t * Small calendar component\n\t\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t<Calendar\n\t\t\t\t\t\t\t\tshowFixedNumberOfWeeks={true}\n\t\t\t\t\t\t\t\t//onChange={setCalendarValue} \n\t\t\t\t\t\t\t\tvalue={calendarValue}\n\t\t\t\t\t\t\t\tlocale={locale}\n\t\t\t\t\t\t\t\tonClickDay={(value) => {\n\t\t\t\t\t\t\t\t\tlet calendar = calendarRef.current;\n\t\t\t\t\t\t\t\t\tcalendar?.getApi().gotoDate(value)\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tactiveStartDate={moment(calendarValue).startOf('month').toDate()}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t\t * Employee list\n\t\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t<h4 style={{\n\t\t\t\t\t\t\t\tmarginBottom: \"0\",\n\t\t\t\t\t\t\t\tpadding: \"0 6px\",\n\t\t\t\t\t\t\t\tmarginTop: \"25px\"\n\t\t\t\t\t\t\t}}>Calendars</h4>\n\t\t\t\t\t\t\t<nav aria-label=\"main\">\n\t\t\t\t\t\t\t\t<List>\n\t\t\t\t\t\t\t\t\t{data!.map(record => {\n\t\t\t\t\t\t\t\t\t\tconst labelId = `checkbox-list-label-${record.id}`;\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<ListItem disablePadding key={record.id}>\n\t\t\t\t\t\t\t\t\t\t\t\t<ListItemButton role={undefined} onClick={handleToggle(record.id)} dense>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tedge=\"start\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchecked={unchecked.indexOf(record.id) === -1}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttabIndex={-1}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdisableRipple\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: record.color,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinputProps={{ 'aria-labelledby': labelId }}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ListItemText\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid={labelId}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tprimary={record.fullname}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsecondary={translate(\"ess.calendar.calendarlist.number\") + \": \" + record.number} />\n\t\t\t\t\t\t\t\t\t\t\t\t</ListItemButton>\n\t\t\t\t\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</List>\n\t\t\t\t\t\t\t</nav>\n\t\t\t\t\t\t</CardContent>\n\t\t\t\t\t</Card>\n\t\t\t\t</Box>\n\t\t\t\t{\n\t\t\t\t\t/**\n\t\t\t\t\t * Fullcalendar/Main component\n\t\t\t\t\t */\n\t\t\t\t}\n\t\t\t\t<Box width={isSmall ? 'auto' : 'calc(100% - 18em)'} height=\"85vh\">\n\t\t\t\t\t<FullCalendar\n\t\t\t\t\t\tref={calendarRef}\n\t\t\t\t\t\tlocale={locale}\n\t\t\t\t\t\theight=\"100%\"\n\t\t\t\t\t\tselectable={true}\n\t\t\t\t\t\tslotMinTime=\"05:00:00\"\n\t\t\t\t\t\tslotMaxTime=\"22:00:00\"\n\t\t\t\t\t\tplugins={[timeGrid, dayGrid, interactionPlugin, rrulePlugin]}\n\t\t\t\t\t\theaderToolbar={{\n\t\t\t\t\t\t\tleft: 'prev,next',\n\t\t\t\t\t\t\tcenter: 'title',\n\t\t\t\t\t\t\tright: 'today'\n\t\t\t\t\t\t}}\n\t\t\t\t\t\teventMaxStack={5}\n\t\t\t\t\t\tinitialView=\"timeGridWeek\"\n\t\t\t\t\t\tselect={(info) => {\n\t\t\t\t\t\t\tsetDialog({\n\t\t\t\t\t\t\t\topen: true,\n\t\t\t\t\t\t\t\trecord: {\n\t\t\t\t\t\t\t\t\tstart_date: info.startStr,\n\t\t\t\t\t\t\t\t\tend_date: info.endStr,\n\t\t\t\t\t\t\t\t\tall_day: info.allDay || false\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}}\n\t\t\t\t\t\teventContent={(eventContent: EventContentArg) => {\n\t\t\t\t\t\t\tif (eventContent.timeText)\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t{eventContent.event.title}<br />\n\t\t\t\t\t\t\t\t\t\t<i>{eventContent.timeText} </i>\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t)\n\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<i>{eventContent.event.title}</i>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}}\n\n\t\t\t\t\t\teventClick={(info) => {\n\t\t\t\t\t\t\tconst item = info.event.toJSON();\n\n\t\t\t\t\t\t\tsetPopover({\n\t\t\t\t\t\t\t\topen: true,\n\t\t\t\t\t\t\t\tanchorEl: info.el,\n\t\t\t\t\t\t\t\trecord: flattenRecord(item)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}}\n\t\t\t\t\t\teventChange={(info) => {\n\t\t\t\t\t\t\teventEditSubmit(info)\n\t\t\t\t\t\t}}\n\t\t\t\t\t\teditable={true}\n\t\t\t\t\t\tevents={events}\n\t\t\t\t\t\tdatesSet={(dateInfo) => {\n\t\t\t\t\t\t\tsetWindow({\n\t\t\t\t\t\t\t\tstart: dateInfo.start.toISOString(),\n\t\t\t\t\t\t\t\tend: dateInfo.end.toISOString()\n\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\tsetCalendarValue(moment(dateInfo.start).add(moment(new Date()).weekday(), 'd').toDate());\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</Box>\n\t\t\t</Box>\n\t\t\t{\n\t\t\t\t/**\n\t\t\t\t * Dialog (popup) opened on \"add button\"\n\t\t\t\t * or on \"select\" calendar event\n\t\t\t\t */\n\t\t\t}\n\t\t\t<Dialog\n\t\t\t\topen={dialog.open}\n\t\t\t\tonClose={handleClose}\n\t\t\t>\n\t\t\t\t<DialogTitle>New event</DialogTitle>\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<EventPopup\n\t\t\t\t\t\t{...dialog}\n\t\t\t\t\t\tsanitizeEmptyValues\n\t\t\t\t\t\tresource=\"event\"\n\t\t\t\t\t\tonSubmit={eventCreate}>\n\t\t\t\t\t</EventPopup>\n\t\t\t\t</DialogContent>\n\t\t\t</Dialog>\n\t\t\t{\n\t\t\t\t/**\n\t\t\t\t * Dialog (popup) opened on \"recurring event\" change\n\t\t\t\t * useful to choose what to do on the recurring timeline\n\t\t\t\t */\n\t\t\t}\n\t\t\t<Dialog open={recurrDialog.open}>\n\t\t\t\t<DialogTitle>Edit recurring event</DialogTitle>\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<FormControl>\n\t\t\t\t\t\t<RadioGroup\n\t\t\t\t\t\t\taria-labelledby=\"demo-radio-buttons-group-label\"\n\t\t\t\t\t\t\tdefaultValue=\"0\"\n\t\t\t\t\t\t\tname=\"radio-buttons-group\"\n\t\t\t\t\t\t\tonChange={e => {\n\t\t\t\t\t\t\t\tsetRecurrAction(e.target.value)\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<FormControlLabel value=\"0\" control={<Radio />} label={translate(\"ess.calendar.event.recurring.thisev\")} />\n\t\t\t\t\t\t\t<FormControlLabel value=\"1\" control={<Radio />} label={translate(\"ess.calendar.event.recurring.thisandfoll\")} />\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t//disabled because it is tricky to handle\n\t\t\t\t\t\t\t\t//<FormControlLabel value=\"2\" control={<Radio />} label=\"All events\" />\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</RadioGroup>\n\t\t\t\t\t</FormControl>\n\t\t\t\t</DialogContent>\n\t\t\t\t<DialogActions>\n\t\t\t\t\t<Button onClick={handleCloseRecurrEvt}>Cancel</Button>\n\t\t\t\t\t<Button onClick={handleSubmitRecurrEvt}>OK</Button>\n\t\t\t\t</DialogActions>\n\t\t\t</Dialog>\n\t\t\t{\n\t\t\t\t/**\n\t\t\t\t * Add button\n\t\t\t\t */\n\t\t\t}\n\t\t\t<Fab color=\"primary\" aria-label=\"add\" style={{\n\t\t\t\tright: 20,\n\t\t\t\tposition: 'fixed',\n\t\t\t\tbottom: 10\n\t\t\t}} onClick={handleOpen}>\n\t\t\t\t<AddIcon />\n\t\t\t</Fab>\n\t\t\t{\n\t\t\t\t/**\n\t\t\t\t * Popover attached to the event on event click\n\t\t\t\t */\n\t\t\t}\n\t\t\t<Dialog\n\t\t\t\topen={editDialog.open}\n\t\t\t\tonClose={() => {\n\t\t\t\t\tsetEditDialog({\n\t\t\t\t\t\topen: false,\n\t\t\t\t\t\trecord: null,\n\t\t\t\t\t\tanchorEl: null\n\t\t\t\t\t});\n\t\t\t\t}}>\n\t\t\t\t<DialogTitle>Edit event</DialogTitle>\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<EventPopup\n\t\t\t\t\t\tsanitizeEmptyValues\n\t\t\t\t\t\trecord={editDialog.record}\n\t\t\t\t\t\tresource=\"event\"\n\t\t\t\t\t\tonSubmit={eventEditSubmit}\n\t\t\t\t\t\tonRemoveClick={eventRemove}>\n\t\t\t\t\t</EventPopup>\n\t\t\t\t</DialogContent>\n\t\t\t</Dialog>\n\n\t\t\t<Popover\n\t\t\t\topen={popover.open}\n\t\t\t\tanchorEl={popover.anchorEl}\n\t\t\t\tonClose={() => {\n\t\t\t\t\tsetPopover({\n\t\t\t\t\t\topen: false,\n\t\t\t\t\t\trecord: null,\n\t\t\t\t\t\tanchorEl: null\n\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t\tPaperProps={{\n\t\t\t\t\tstyle: { width: '300px' },\n\t\t\t\t}}\n\t\t\t\tanchorOrigin={{\n\t\t\t\t\tvertical: 'center',\n\t\t\t\t\thorizontal: 'left',\n\t\t\t\t}}\n\t\t\t\ttransformOrigin={{\n\t\t\t\t\tvertical: 'center',\n\t\t\t\t\thorizontal: 'right',\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<Box sx={{ m: 0.5 }}>\n\t\t\t\t\t<Grid container justifyContent=\"flex-end\">\n\t\t\t\t\t\t<IconButton onClick={() => {\n\t\t\t\t\t\t\tsetEditDialog({\n\t\t\t\t\t\t\t\topen: true,\n\t\t\t\t\t\t\t\trecord: popover.record\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tsetPopover({\n\t\t\t\t\t\t\t\topen: false,\n\t\t\t\t\t\t\t\trecord: null,\n\t\t\t\t\t\t\t\tanchorEl: null\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t<EditIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t<IconButton onClick={eventRemove}>\n\t\t\t\t\t\t\t<DeleteIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t<IconButton onClick={() => {\n\t\t\t\t\t\t\tsetPopover({\n\t\t\t\t\t\t\t\topen: false,\n\t\t\t\t\t\t\t\trecord: null,\n\t\t\t\t\t\t\t\tanchorEl: null\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t<CloseIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid container justifyContent=\"flex-start\">\n\t\t\t\t\t\t<List sx={{ width: '100%', maxWidth: 360, bgcolor: 'background.paper' }}>\n\t\t\t\t\t\t\t<ListItem>\n\t\t\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t\t\t<SquareRoundedIcon style={{ color: popover.record?.backgroundColor }} />\n\t\t\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t\t\t<ListItemText primary={popover.record?.title} />\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t\t<ListItem>\n\t\t\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t\t\t<EventRoundedIcon />\n\t\t\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t\t\t<ListItemText primary={popover.record?.employee_descr} />\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t\t<ListItem>\n\t\t\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t\t\t<QueryBuilderRoundedIcon />\n\t\t\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t\t\t<ListItemText\n\t\t\t\t\t\t\t\t\tprimary={new Date(popover.record?.start_date).toLocaleString()}\n\t\t\t\t\t\t\t\t\tsecondary={new Date(popover.record?.end_date).toLocaleString()} />\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t\t<ListItem style={{\n\t\t\t\t\t\t\t\tdisplay: popover.record?._rrule == null ? \"none\" : \"default\"\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t<ListItemIcon>\n\t\t\t\t\t\t\t\t\t<RepeatRoundedIcon />\n\t\t\t\t\t\t\t\t</ListItemIcon>\n\t\t\t\t\t\t\t\t<ListItemText\n\t\t\t\t\t\t\t\t\tprimary={popover.record?._rrule?.toText()} />\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t</List>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Box>\n\t\t\t</Popover>\n\t\t</div >\n\t)\n}\n","/* eslint-disable import/no-anonymous-default-export */\nimport { EmployeeList } from './EmployeeList';\nimport { EmployeeEdit } from './EmployeeEdit';\nimport { EmployeeCreate } from './EmployeeCreate';\n\nexport default {\n    list: EmployeeList,\n    create: EmployeeCreate,\n    edit: EmployeeEdit\n};","import React from 'react';\nimport { List, Datagrid, TextField, NumberField, BooleanField, EditButton, DeleteButton, CloneButton } from 'react-admin';\n\nimport { ColorField } from '../components/ColorInput';\n\nexport const EmployeeList = () => (\n    <List>\n        <Datagrid rowClick=\"edit\">\n            <ColorField source=\"color\" />\n            <TextField source=\"number\" />\n            <TextField source=\"name\" />\n            <TextField source=\"surname\" />\n            <TextField source=\"phone\" />\n            <TextField source=\"email\" />\n            <NumberField source=\"weekHrs\" />\n            <BooleanField source=\"active\" />\n            <EditButton />\n            <DeleteButton />\n            <CloneButton />\n        </Datagrid>\n    </List>\n);","import React from 'react';\nimport Grid from '@mui/material/Grid';\nimport { useTranslate, BooleanInput, Create, SimpleForm, TextInput, required, useNotify, useRedirect } from 'react-admin';\n\nimport { ColorInput } from '../components/ColorInput';\nimport FullCalendar from '@fullcalendar/react' // must go before plugins\nimport timeGrid from '@fullcalendar/timegrid' // a plugin!\nimport dayGrid from '@fullcalendar/daygrid'\nimport interactionPlugin from '@fullcalendar/interaction';\nimport Box from '@mui/material/Box';\n\nexport const EmployeeCreate = () => {\n    const notify = useNotify();\n    const redirect = useRedirect();\n    const translate = useTranslate();\n\n    return (\n        <Create redirect=\"list\">\n            <SimpleForm>\n                <Grid container spacing={2}>\n                    <Grid item xs={4}>\n                        <TextInput source=\"number\" fullWidth label={translate(`resources.employee.fields.number`)} validate={required()}/>\n                    </Grid>\n                    <Grid item xs={4}>\n                        <BooleanInput source=\"active\" fullWidth label={translate(`resources.employee.fields.active`)} defaultValue={true} />\n                    </Grid>\n                    <Grid item xs={4}>\n                        <ColorInput source=\"color\" label={translate(`resources.employee.fields.color`)} fullWidth validate={required()} />\n                    </Grid>\n                    <Grid item xs={6}>\n                        <TextInput source=\"name\" fullWidth label={translate(`resources.employee.fields.name`)} validate={required()} />\n                    </Grid>\n                    <Grid item xs={6}>\n                        <TextInput source=\"surname\" fullWidth label={translate(`resources.employee.fields.surname`)} validate={required()} />\n                    </Grid>\n                    <Grid item xs={4}>\n                        <TextInput source=\"phone\" fullWidth label={translate(`resources.employee.fields.phone`)} />\n                    </Grid>\n                    <Grid item xs={4}>\n                        <TextInput source=\"email\" fullWidth label={translate(`resources.employee.fields.email`)} />\n                    </Grid>\n                </Grid>\n            </SimpleForm>\n\n        </Create>\n    );\n};\n","import React from 'react';\nimport Grid from '@mui/material/Grid';\nimport { BooleanInput, SimpleForm, TextInput, required, Edit, useTranslate } from 'react-admin';\n\nimport {  ColorInput } from '../components/ColorInput';\n\nexport const EmployeeEdit = () => {\n    const translate = useTranslate();\n\n    return (<Edit redirect=\"list\">\n        <SimpleForm>\n            <Grid container spacing={2}>\n                <Grid item xs={3}>\n                    <TextInput disabled source=\"id\" />\n                </Grid>\n                <Grid item xs={3}>\n                    <TextInput source=\"number\" fullWidth label={translate(`resources.employee.fields.number`)} validate={required()}/>\n                </Grid>\n                <Grid item xs={3}>\n                    <BooleanInput source=\"active\" fullWidth label={translate(`resources.employee.fields.active`)} defaultValue={true} />\n                </Grid>\n                <Grid item xs={3}>\n                    <ColorInput source=\"color\" label={translate(`resources.employee.fields.color`)} fullWidth validate={required()} />\n                </Grid>\n                <Grid item xs={6}>\n                    <TextInput source=\"name\" fullWidth label={translate(`resources.employee.fields.name`)} validate={required()} />\n                </Grid>\n                <Grid item xs={6}>\n                    <TextInput source=\"surname\" fullWidth label={translate(`resources.employee.fields.surname`)} validate={required()} />\n                </Grid>\n                <Grid item xs={4}>\n                    <TextInput source=\"phone\" fullWidth label={translate(`resources.employee.fields.phone`)} />\n                </Grid>\n                <Grid item xs={4}>\n                    <TextInput source=\"email\" fullWidth label={translate(`resources.employee.fields.email`)} />\n                </Grid>\n            </Grid>\n        </SimpleForm>\n    </Edit>)\n}","/* eslint-disable import/no-anonymous-default-export */\nimport { CustomerList } from './CustomerList';\nimport { CustomerEdit } from './CustomerEdit';\nimport { CustomerCreate } from './CustomerCreate';\n\nexport default {\n    list: CustomerList,\n    create: CustomerCreate,\n    edit: CustomerEdit\n};","import React from 'react';\nimport { List, Datagrid, TextField, NumberField, BooleanField, EditButton, DeleteButton, CloneButton } from 'react-admin';\n\nimport { ColorField } from '../components/ColorInput';\n\nexport const CustomerList = () => (\n    <List>\n        <Datagrid rowClick=\"edit\">\n            <TextField source=\"vat\" />\n            <TextField source=\"name\" />\n            <TextField source=\"phone\" />\n            <TextField source=\"city\" />\n            <TextField source=\"website\" />\n            <EditButton />\n            <DeleteButton />\n            <CloneButton />\n        </Datagrid>\n    </List>\n);","import React from 'react';\nimport Grid from '@mui/material/Grid';\nimport { BooleanInput, Create, SimpleForm, TextInput, required, useTranslate } from 'react-admin';\n\nimport { ColorField, ColorInput } from '../components/ColorInput';\nimport FullCalendar from '@fullcalendar/react' // must go before plugins\nimport timeGrid from '@fullcalendar/timegrid' // a plugin!\nimport dayGrid from '@fullcalendar/daygrid'\nimport interactionPlugin from '@fullcalendar/interaction';\nimport Box from '@mui/material/Box';\n\nexport const CustomerCreate = () => {\n    const translate = useTranslate();\n\n    return (<Create redirect=\"list\">\n        <SimpleForm>\n            <Grid container spacing={2}>\n                <Grid item xs={6}>\n                    <TextInput source=\"vat\" fullWidth label={translate(`resources.customer.fields.vat`)} validate={required()} />\n                </Grid>\n                <Grid item xs={6}>\n                    <TextInput source=\"name\" fullWidth label={translate(`resources.customer.fields.name`)} validate={required()} />\n                </Grid>\n                <Grid item xs={6}>\n                    <TextInput source=\"email\" fullWidth label={translate(`resources.customer.fields.email`)} />\n                </Grid>\n                <Grid item xs={6}>\n                    <TextInput source=\"phone\" fullWidth label={translate(`resources.customer.fields.phone`)} />\n                </Grid>\n                <Grid item xs={6}>\n                    <TextInput source=\"zipcode\" fullWidth label={translate(`resources.customer.fields.zipcode`)} />\n                </Grid>\n                <Grid item xs={6}>\n                    <TextInput source=\"city\" fullWidth label={translate(`resources.customer.fields.city`)} />\n                </Grid>\n                <Grid item xs={6}>\n                    <TextInput source=\"website\" fullWidth label={translate(`resources.customer.fields.website`)} />\n                </Grid>\n            </Grid>\n        </SimpleForm>\n    </Create>)\n}","import React from 'react';\nimport Grid from '@mui/material/Grid';\nimport { BooleanInput, Create, SimpleForm, TextInput, required, Edit, useTranslate } from 'react-admin';\n\nimport {  ColorInput } from '../components/ColorInput';\n\nexport const CustomerEdit = () => {\n    const translate = useTranslate();\n\n    return (<Edit redirect=\"list\">\n        <SimpleForm>\n            <Grid container spacing={2}>\n                <Grid item xs={4}>\n                    <TextInput disabled source=\"id\" />\n                </Grid>\n                <Grid item xs={4}>\n                    <TextInput source=\"vat\" fullWidth label={translate(`resources.customer.fields.vat`)} validate={required()} />\n                </Grid>\n                <Grid item xs={4}>\n                    <TextInput source=\"name\" fullWidth label={translate(`resources.customer.fields.name`)} validate={required()} />\n                </Grid>\n                <Grid item xs={6}>\n                    <TextInput source=\"email\" fullWidth label={translate(`resources.customer.fields.email`)} />\n                </Grid>\n                <Grid item xs={6}>\n                    <TextInput source=\"phone\" fullWidth label={translate(`resources.customer.fields.phone`)} />\n                </Grid>\n                <Grid item xs={6}>\n                    <TextInput source=\"zipcode\" fullWidth label={translate(`resources.customer.fields.zipcode`)} />\n                </Grid>\n                <Grid item xs={6}>\n                    <TextInput source=\"city\" fullWidth label={translate(`resources.customer.fields.city`)} />\n                </Grid>\n                <Grid item xs={6}>\n                    <TextInput source=\"website\" fullWidth label={translate(`resources.customer.fields.website`)} />\n                </Grid>\n            </Grid>\n        </SimpleForm>\n    </Edit>)\n}","/* eslint-disable import/no-anonymous-default-export */\nimport { UserList } from './UserList';\nimport { UserEdit } from './UserEdit';\nimport { UserCreate } from './UserCreate';\n\nexport default {\n    list: UserList,\n    create: UserCreate,\n    edit: UserEdit\n};","import React from 'react';\nimport { List, Datagrid, TextField, EditButton, DeleteButton, CloneButton } from 'react-admin';\n\n\nexport const UserList = () => (\n    <List>\n        <Datagrid rowClick=\"edit\">\n            <TextField source=\"id\" />\n            <TextField source=\"name\" />\n            <TextField source=\"email\" />\n            <EditButton />\n            <CloneButton />\n        </Datagrid>\n    </List>\n);","import React from 'react';\nimport { Create, SimpleForm, TextInput, required, PasswordInput } from 'react-admin';\n\nexport const UserCreate = () => (\n    <Create redirect=\"list\">\n        <SimpleForm>\n            <TextInput source=\"name\" validate={[required()]}  label=\"name\" />\n            <TextInput source=\"email\" validate={[required()]}  label=\"Email\" />\n            <PasswordInput source=\"password\" label=\"Password\" />\n        </SimpleForm>\n    </Create>\n);","import React from 'react';\nimport { SimpleForm, TextInput, Edit } from 'react-admin';\n\nexport const UserEdit = () => (\n    <Edit redirect=\"list\">\n        <SimpleForm>\n            <TextInput disabled source=\"id\" />\n            <TextInput source=\"name\" />\n            <TextInput source=\"email\" />\n        </SimpleForm>\n    </Edit>\n);","import React from 'react';\nimport { Admin, CustomRoutes, Resource, ListGuesser, Login, Authenticated } from \"react-admin\";\n\nimport polyglotI18nProvider from 'ra-i18n-polyglot';\nimport englishMessages from './i18n/en';\nimport italianMessages from './i18n/it';\n\nimport { Route } from \"react-router-dom\";\nimport {theme} from './theme';\nimport Layout  from './Layout';\nimport TimelineView from './views/timeline';\nimport { dataProvider } from './dataProvider';\nimport { authProvider } from './authProvider';\nimport NotFound from './views/notfound'\nimport { QueryClient } from 'react-query';\n\nimport EmployeeSummaryList from './views/eventsummary';\nimport CalendarView from './views/calendar';\n\nimport employees from './employees';\nimport customers from './customers';\nimport users from './users';\n\nconst i18nProvider = polyglotI18nProvider(locale => {\n    if (locale === 'it') {\n        return italianMessages;\n    }\n\n    // Always fallback on english\n    return englishMessages;\n}, 'en');\n\nconst App = () => (\n  <Admin \n    dataProvider={dataProvider} \n    authProvider={authProvider}\n    theme={theme} \n    layout={Layout}\n    i18nProvider={i18nProvider}\n  >\n    <Resource name=\"employee\" {...employees} />\n    <Resource name=\"customer\" {...customers}/>\n    <Resource name=\"users\" {...users} />\n      <CustomRoutes>\n            {<Route path=\"/timeline\" element={<TimelineView />}/>}\n            <Route path=\"/calendar\" element={<CalendarView />}/>\n            <Route path=\"/summary\" element={<EmployeeSummaryList />}/>\n        </CustomRoutes>\n        \n  </Admin>\n);\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport * as dotenv from 'dotenv';\n\ndotenv.config();\n\nconst root = ReactDOM.createRoot(\n  document.getElementById('root') as HTMLElement\n);\nroot.render(\n    <App />\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}